# 接口文档

## 获取用户信息

### 接口概述

#### 接口功能

> 本文档主要针对需要集成http api的技术工程师。 如果您的应用已经获取用户授权，则可以通过该接口获取用户的基本信息，包括账号，头像地址，会员类型等。

#### 使用条件

> 频控限制：有
> 接口鉴权：有
> 接入流程：[https://pan.baidu.com/union/document/entrance#%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B](https://pan.baidu.com/union/document/entrance#接入流程)

#### 依赖说明

> access_token: 作为访问用户数据的授权凭证

#### 其他说明

```
1.更换头像后，请求接口返回的头像地址不变。
2.请求头像地址获取的头像图片预期在几秒内同步至最新头像，如未更新，请按照以下建议进行排查：
 a. 排查本地是否有缓存
 b. 使用浏览器环境清除缓存后再次请求头像地址。
```

#### 问题反馈

> 参考 [https://pan.baidu.com/union/document/entrance#%E9%97%AE%E9%A2%98%E5%8F%8D%E9%A6%88](https://pan.baidu.com/union/document/entrance#问题反馈)

### 参数说明

#### 请求方式

> GET

#### 接口地址

```
https://pan.baidu.com/rest/2.0/xpan/nas?method=uinfo
```

#### 请求参数

| 名称         | 类型   | 必须 | 示例  | 参数位置 | 描述         |
| ------------ | ------ | ---- | ----- | -------- | ------------ |
| access_token | string | 是   | ----- | query    | 接口鉴权参数 |

#### 响应参数

| 参数         | 类型   | 描述                                      |
| ------------ | ------ | ----------------------------------------- |
| baidu_name   | string | 百度账号                                  |
| netdisk_name | string | 网盘账号                                  |
| avatar_url   | string | 头像地址                                  |
| vip_type     | int    | 会员类型，0普通用户、1普通会员、2超级会员 |
| uk           | int    | 用户ID                                    |

### 示例说明

假设示例请求参数如下。

| 参数         | 参数数据 | 描述         |
| ------------ | -------- | ------------ |
| access_token | 121.456  | 接口鉴权参数 |

#### curl示例

```
curl -L -X GET 'https://pan.baidu.com/rest/2.0/xpan/nas?access_token=121.456&method=uinfo' \
-H 'User-Agent: pan.baidu.com' 
```

#### python 示例

```
import requests

url = "https://pan.baidu.com/rest/2.0/xpan/nas?access_token=121.456&method=uinfo"
payload = {}
headers = {
  'User-Agent': 'pan.baidu.com'
}
response = requests.request("GET", url, headers=headers, data = payload)
print(response.text.encode('utf8'))
```

#### 响应示例



```
{
    "avatar_url": "https://dss0.bdstatic.com/7Ls0a8Sm1A5BphGlnYG/sys/portrait/item/netdisk.1.3d20c095.phlucxvny00WCx9W4kLifw.jpg",
    "baidu_name": "啊呀呀",
    "errmsg": "succ",
    "errno": 0,
    "netdisk_name": "abcdefff",
    "request_id": "674030589892501935",
    "uk": 208281036,
    "vip_type": 0
}
```

#### 错误码说明

| 错误码 | 描述                   |
| ------ | ---------------------- |
| 42905  | 查询用户名失败，可重试 |

更多错误码请参考：[https://pan.baidu.com/union/document/error#%E9%94%99%E8%AF%AF%E7%A0%81%E5%88%97%E8%A1%A8](https://pan.baidu.com/union/document/error#错误码列表)

#### 请求限制

单用户单接口的QPS（每秒请求次数）上限如下，如需更多请通过邮件联系说明。

| 分钟 | 小时 | 天   |
| ---- | ---- | ---- |
| 20   | 300  | 1000 |

## 获取网盘容量信息

### 接口概述

#### 接口功能

> 本文档主要针对需要集成http api的技术工程师。 如果您的应用已经获取用户授权，则可以通过该接口获取用户的网盘空间使用情况。

#### 使用条件

> 频控限制：有
> 接口鉴权：有
> 接入流程：[https://pan.baidu.com/union/document/entrance#%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B](https://pan.baidu.com/union/document/entrance#接入流程)

#### 依赖说明

> access_token: 作为访问用户数据的授权凭证

#### 其他说明

#### 问题反馈

> 参考 [https://pan.baidu.com/union/document/entrance#%E9%97%AE%E9%A2%98%E5%8F%8D%E9%A6%88](https://pan.baidu.com/union/document/entrance#问题反馈)

### 参数说明

#### 请求方式

> GET

#### 接口地址

```
https://pan.baidu.com/api/quota
```

#### 请求参数

| 名称         | 类型   | 必须 | 示例     | 参数位置  | 描述                                      |
| ------------ | ------ | ---- | -------- | --------- | ----------------------------------------- |
| access_token | string | 是   | -------- | query     | 接口鉴权参数                              |
| checkfree    | int    | 否   | 1        | --------- | 是否检查免费信息，0为不查，1为查，默认为0 |
| checkexpire  | int    | 否   | 1        | --------- | 是否检查过期信息，0为不查，1为查，默认为0 |

#### 响应参数

| 参数   | 类型 | 描述                |
| ------ | ---- | ------------------- |
| total  | int  | 总空间大小，单位B   |
| expire | bool | 7天内是否有容量到期 |
| used   | int  | 已使用大小，单位B   |
| free   | int  | 剩余大小，单位B     |

### 示例说明

假设示例请求数据如下

| 参数         | 参数数据 | 描述         |
| ------------ | -------- | ------------ |
| access_token | 123.456  | 接口鉴权参数 |
| checkfree    | 1        | 检查免费信息 |
| checkexpire  | 1        | 检查过期信息 |

#### curl示例

```
curl -L -X GET 'https://pan.baidu.com/api/quota?access_token=123.456&checkfree=1&checkexpire=1' \
-H 'User-Agent: pan.baidu.com' 
```

#### Python示例

```
import requests

url = "https://pan.baidu.com/api/quota?access_token=123.456&checkfree=1&checkexpire=1"
payload = {}
headers = {
  'User-Agent': 'pan.baidu.com'
}
response = requests.request("GET", url, headers=headers, data = payload)
print(response.text.encode('utf8'))
```

#### 响应示例



```
{
    "errno": 0,
    "total": 2205465706496,
    "free": 2205465706496,
    "request_id": 4890482559098510375,
    "expire": false,
    "used": 686653888910
}
```

#### 错误码说明

更多错误码请参考： [https://pan.baidu.com/union/document/error#%E9%94%99%E8%AF%AF%E7%A0%81%E5%88%97%E8%A1%A8](https://pan.baidu.com/union/document/error#错误码列表)

#### 请求限制

单用户单接口的QPS（每秒请求次数）上限如下。

| 分钟 | 小时 | 天   |
| ---- | ---- | ---- |
| 20   | 300  | 1000 |

## 获取文件列表

### 接口概述

#### 接口功能

> 本文档主要针对需要集成http api的技术工程师。 如果您的应用已经获取用户授权，则可以通过该接口获取用户网盘中指定目录下的文件列表，返回的文件列表支持排序，分页等。

#### 使用条件

> 频控限制：有
> 接口鉴权：有
> 接入流程：[https://pan.baidu.com/union/document/entrance#%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B](https://pan.baidu.com/union/document/entrance#接入流程)

#### 依赖说明

> access_token: 作为访问用户数据的授权凭证

#### 其他说明

```
1.此接口具有频率限制，详情请参考【请求限制】
```

#### 问题反馈

> 参考 [https://pan.baidu.com/union/document/entrance#%E9%97%AE%E9%A2%98%E5%8F%8D%E9%A6%88](https://pan.baidu.com/union/document/entrance#问题反馈)

### 参数说明

#### 请求方式

> GET

#### 接口地址

```
https://pan.baidu.com/rest/2.0/xpan/file?method=list
```

#### 请求参数

| 名称         | 类型   | 必须 | 示例 | 参数位置 | 描述                                                         |
| ------------ | ------ | ---- | ---- | -------- | ------------------------------------------------------------ |
| access_token | string | 是   | ---  | query    | 接口鉴权参数                                                 |
| dir          | string | 否   | ---  | ---      | 需要list的目录，以/开头的绝对路径, 默认为/                   |
| order        | string | 否   | ---  | ---      | 排序字段：默认为name time表示先按文件类型排序，后按修改时间排序 name表示先按文件类型排序，后按文件名称排序 size表示先按文件类型排序， 后按文件大小排序 |
| desc         | string | 否   | ---  | ---      | 该KEY存在为降序，否则为升序 （注：排序的对象是当前目录下所有文件，不是当前分页下的文件） |
| start        | int    | 否   | ---  | ---      | 起始位置，从0开始                                            |
| limit        | int    | 否   | ---  | ---      | 每页条目数，默认为1000，最大值为10000                        |
| web          | string | 否   |      |          | 值为web时， 返回dir_empty属性 和 缩略图数据                  |
| folder       | int    | 否   |      |          | 是否只返回文件夹，0 返回所有，1 只返回目录条目，且属性只返回path字段。 |
| showempty    | int    | 否   |      |          | 是否返回 dir_empty 属性，0 不返回，1 返回                    |

#### 响应参数

| 参数            | 类型   | 描述                                                         |
| --------------- | ------ | ------------------------------------------------------------ |
| fs_id           | uint64 | 文件在云端的唯一标识ID                                       |
| path            | string | 文件的绝对路径                                               |
| server_filename | string | 文件名称                                                     |
| size            | unit   | 文件大小，单位B                                              |
| server_mtime    | uint   | 文件在服务器修改时间                                         |
| server_ctime    | unit   | 文件在服务器创建时间                                         |
| local_mtime     | uint   | 文件在客户端修改时间                                         |
| local_ctime     | unit   | 文件在客户端创建时间                                         |
| isdir           | uint   | 是否目录，0 文件、1 目录                                     |
| category        | unit   | 文件类型，1 视频、2 音频、3 图片、4 文档、5 应用、6 其他、7 种子 |
| md5             | string | 文件的md5值，只有是文件类型时，该KEY才存在                   |
| dir_empty       | int    | 该目录是否存在子目录， 只有请求参数带WEB且该条目为目录时，该KEY才存在， 0为存在， 1为不存在 |
| thumbs          | array  | 只有请求参数带WEB且该条目分类为图片时，该KEY才存在，包含三个尺寸的缩略图URL |

### 示例说明

假设示例请求数据如下

| 参数         | 参数数据  | 描述                                     |
| ------------ | --------- | ---------------------------------------- |
| access_token | 123.456   | 接口鉴权参数                             |
| dir          | /测试目录 | 要list的目录                             |
| order        | time      | 排序字段                                 |
| desc         | 1         | 根据排序字段降序                         |
| start        | 0         | 分页起始                                 |
| limit        | 10        | 每页条数                                 |
| web          | web       | 指定是web请求，获取dir_empty字段和缩略图 |
| folder       | 0         | 默认值，返回全部                         |

#### curl示例

```
curl -L -X GET 'https://pan.baidu.com/rest/2.0/xpan/file?method=list&dir=/%E6%B5%8B%E8%AF%95%E7%9B%AE%E5%BD%95&order=time&start=0&limit=10&web=web&folder=0&access_token=123.456&desc=1' \
-H 'User-Agent: pan.baidu.com' 
```

#### Python示例

```
import requests

url = "https://pan.baidu.com/rest/2.0/xpan/file?method=list&dir=/测试目录&order=time&start=0&limit=10&web=web&folder=0&access_token=123.456&desc=1"
payload = {}
files = {}
headers = {
  'User-Agent': 'pan.baidu.com'
}
response = requests.request("GET", url, headers=headers, data = payload, files = files)
print(response.text.encode('utf8'))
```

#### 响应示例



```
{
    "errno": 0,
    "guid_info": "",
    "list": [
        {
            "server_filename": "abc",
            "privacy": 0,
            "category": 6,
            "unlist": 0,
            "fs_id": 770693330924692,
            "dir_empty": 1,
            "server_atime": 0,
            "server_ctime": 1596078019,
            "local_mtime": 1596078019,
            "size": 0,
            "isdir": 1,
            "share": 0,
            "path": "/测试目录/abc",
            "local_ctime": 1596078019,
            "server_mtime": 1596078019,
            "empty": 0,
            "oper_id": 2082810368
        },
        {
            "server_filename": "testnac",
            "privacy": 0,
            "category": 6,
            "unlist": 0,
            "fs_id": 556220482670513,
            "dir_empty": 0,
            "server_atime": 0,
            "server_ctime": 1594267136,
            "local_mtime": 1594267136,
            "size": 0,
            "isdir": 1,
            "share": 0,
            "path": "/测试目录/testnac",
            "local_ctime": 1594267136,
            "server_mtime": 1596077866,
            "empty": 0,
            "oper_id": 2082810368
        },
        {
            "privacy": 0,
            "category": 4,
            "unlist": 0,
            "fs_id": 85001194198278,
            "server_mtime": 1596078163,
            "oper_id": 2082810368,
            "thumbs": {
                "url3": "https://thumbnail0.baidupcs.com/thumbnail/25319465flf30b76c4032ef358446f91?fid=2082810368-250528-85001194198278&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-mM8yrCapN3AcTiEuhfKI5gI5lmw%3d&expires=8h&chkbd=0&chkv=0&dp-logid=4904657509137213829&dp-callid=0&time=1596078000&size=c850_u580&quality=100",
                "url2": "https://thumbnail0.baidupcs.com/thumbnail/25319465flf30b76c4032ef358446f91?fid=2082810368-250528-85001194198278&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-mM8yrCapN3AcTiEuhfKI5gI5lmw%3d&expires=8h&chkbd=0&chkv=0&dp-logid=4904657509137213829&dp-callid=0&time=1596078000&size=c360_u270&quality=100",
                "url1": "https://thumbnail0.baidupcs.com/thumbnail/25319465flf30b76c4032ef358446f91?fid=2082810368-250528-85001194198278&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-mM8yrCapN3AcTiEuhfKI5gI5lmw%3d&expires=8h&chkbd=0&chkv=0&dp-logid=4904657509137213829&dp-callid=0&time=1596078000&size=c140_u90&quality=100"
            },
        {
            "privacy": 0,
            "category": 2,
            "unlist": 0,
            "fs_id": 633507813519281,
            "server_mtime": 1596077717,
            "server_atime": 0,
            "server_ctime": 1563282091,
            "oper_id": 2082810368,
            "local_mtime": 1247549551,
            "md5": "b8b5bd53e23dd40b5c4a650e272f2e19",
            "share": 0,
            "path": "/测试目录/Sleep Away.mp3",
            "local_ctime": 1247549558,
            "size": 4842585,
            "server_filename": "Sleep Away.mp3",
            "isdir": 0
        }
    ],
    "request_id": 4904657509137213829,
    "guid": 0
}
```

#### 错误码说明

| 错误码 | 描述               |
| ------ | ------------------ |
| -7     | 文件或目录无权访问 |
| -9     | 文件或目录不存在   |

更多错误码请参考： [https://pan.baidu.com/union/document/error#%E9%94%99%E8%AF%AF%E7%A0%81%E5%88%97%E8%A1%A8](https://pan.baidu.com/union/document/error#错误码列表)

#### 请求限制

单用户单接口的QPS（每秒请求次数）上限如下。

| 分钟 | 小时 | 天   |
| ---- | ---- | ---- |
| 20   | 300  | 1000 |

## 递归获取文件列表

### 接口概述

#### 接口功能

> 本文档主要针对需要集成http api的技术工程师。 如果您的应用已经获取用户授权，则可以通过该接口递归获取指定目录下的文件列表

#### 使用条件

> 频控限制：有
> 接口鉴权：有
> 接入流程：[https://pan.baidu.com/union/document/entrance#%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B](https://pan.baidu.com/union/document/entrance#接入流程)

#### 依赖说明

> access_token: 作为访问用户数据的授权凭证

#### 其他说明

```
1.此接口具有频率限制，详情请参考【请求限制】
```

#### 问题反馈

> 参考 [https://pan.baidu.com/union/document/entrance#%E9%97%AE%E9%A2%98%E5%8F%8D%E9%A6%88](https://pan.baidu.com/union/document/entrance#问题反馈)

### 参数说明

#### 请求方式

> GET

#### 接口地址

```
https://pan.baidu.com/rest/2.0/xpan/multimedia?method=listall
```

#### 请求参数

| 名称         | 类型   | 必须 | 示例 | 参数位置 | 描述                                                         |
| ------------ | ------ | ---- | ---- | -------- | ------------------------------------------------------------ |
| access_token | string | 是   | ---  | query    | 接口鉴权参数                                                 |
| path         | string | 是   | ---  | -----    | 目录名称                                                     |
| order        | string | 否   | ---  | -----    | 排序字段:time(修改时间)，name(文件名)，size(大小，目录无大小)，默认为文件类型 |
| desc         | string | 否   | ---  | -----    | 0为升序，1为降序，默认为0                                    |
| start        | int    | 否   | ---  | -----    | 查询起点，默认为0                                            |
| limit        | int    | 否   | ---  | -----    | 查询数目，默认为1                                            |
| recursion    | int    | 否   | ---  | -----    | 是否递归，0为否，1为是，默认为0                              |
| ctime        | int    | 否   | ---  | -----    | 文件上传时间，设置此参数，表示只返回上传时间大于ctime的文件  |
| mtime        | int    | 否   | ---  | -----    | 文件修改时间，设置此参数，表示只返回修改时间大于mtime的文件  |
| web          | int    | 否   | ---  | -----    | 默认为0， 为1时返回缩略图地址                                |

#### 响应参数

| 参数                     | 类型   | 描述                             |
| ------------------------ | ------ | -------------------------------- |
| cursor                   | int    | 下一次查询的起点                 |
| has_more                 | int    | 是否还有下一页，0表示无，1表示有 |
| list                     | array  | 文件列表                         |
| list[0] ["category"]     | int    | 文件类型                         |
| list[0] [" fs_id"]       | int    | 文件在云端的唯一标识             |
| list[0] ["isdir"]        | int    | 是否是目录，0为否，1为是         |
| list[0] ["local_ctime"]  | int    | 文件在客户端创建时间             |
| list[0] ["local_mtime"]  | int    | 文件在客户端修改时间             |
| list[0] ["server_ctime"] | int    | 文件在服务端创建时间             |
| list[0] ["server_mtime"] | int    | 文件在服务端修改时间             |
| list[0] ["md5"]          | string | 文件md5                          |
| list[0] ["size"]         | int    | 文件大小                         |
| list[0] ["thumbs"]       | string | 缩略图地址                       |

### 示例说明

假设示例请求数据如下

| 参数         | 参数数据  | 描述         |
| ------------ | --------- | ------------ |
| access_token | 123.456   | 接口鉴权参数 |
| path         | /测试目录 | 目录名称     |
| recursion    | 1         | 需要递归     |
| start        | 0         | 查询起点     |
| limit        | 5         | 查询数目     |
| web          | 1         | 需要缩略图   |

#### curl示例

```
curl -L -X GET 'http://pan.baidu.com/rest/2.0/xpan/multimedia?method=listall&path=/%E6%B5%8B%E8%AF%95%E7%9B%AE%E5%BD%95&access_token=123.456&web=1&recursion=1&start=0&limit=5' \
-H 'User-Agent: pan.baidu.com' 
```

#### Python示例

```
import requests

url = "http://pan.baidu.com/rest/2.0/xpan/multimedia?method=listall&path=/测试目录&access_token=123.456&web=1&recursion=1&start=0&limit=5"
payload = {}
files = {}
headers = {
  'User-Agent': 'pan.baidu.com'
}
response = requests.request("GET", url, headers=headers, data = payload, files = files)
print(response.text.encode('utf8'))
```

#### 响应示例



```
{
    "cursor": 5,
    "errmsg": "succ",
    "errno": 0,
    "has_more": 1,
    "list": [
        {
            "category": 4,
            "fs_id": 30995775581277,
            "isdir": 0,
            "local_ctime": 1547097900,
            "local_mtime": 1547097900,
            "md5": "540b49455n2f04f55c3929eb8b0c0445",
            "path": "/测试目录/20160820.txt",
            "server_ctime": 1578310087,
            "server_filename": "20160820.txt",
            "server_mtime": 1596078161,
            "size": 1120,
            "thumbs": {
                "url1": "https://thumbnail0.baidupcs.com/thumbnail/540b49455n2f04f55c3929eb8b0c0445?fid=2082810368-250528-30995775581277&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-VDkr1qdq%2BXPk79PIL5SHCADhEnk%3D&expires=8h&chkbd=0&chkv=0&dp-logid=4193316540243014694&dp-callid=0&time=1596092400&size=c140_u90&quality=100",
                "url2": "https://thumbnail0.baidupcs.com/thumbnail/540b49455n2f04f55c3929eb8b0c0445?fid=2082810368-250528-30995775581277&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-VDkr1qdq%2BXPk79PIL5SHCADhEnk%3D&expires=8h&chkbd=0&chkv=0&dp-logid=4193316540243014694&dp-callid=0&time=1596092400&size=c360_u270&quality=100",
                "url3": "https://thumbnail0.baidupcs.com/thumbnail/540b49455n2f04f55c3929eb8b0c0445?fid=2082810368-250528-30995775581277&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-VDkr1qdq%2BXPk79PIL5SHCADhEnk%3D&expires=8h&chkbd=0&chkv=0&dp-logid=4193316540243014694&dp-callid=0&time=1596092400&size=c850_u580&quality=100"
            }
        },
        {
            "category": 4,
            "fs_id": 85001194198278,
            "isdir": 0,
            "local_ctime": 1547097899,
            "local_mtime": 1547097899,
            "md5": "25319465flf30b76c4032ef358446f91",
            "path": "/测试目录/20160907.txt",
            "server_ctime": 1578309734,
            "server_filename": "20160907.txt",
            "server_mtime": 1596078163,
            "size": 3480,
            "thumbs": {
                "url1": "https://thumbnail0.baidupcs.com/thumbnail/25319465flf30b76c4032ef358446f91?fid=2082810368-250528-85001194198278&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-q5Zan3NIaWpCaD6Qq6kyaiuVMZ4%3D&expires=8h&chkbd=0&chkv=0&dp-logid=4193316600199584700&dp-callid=0&time=1596092400&size=c140_u90&quality=100",
                "url2": "https://thumbnail0.baidupcs.com/thumbnail/25319465flf30b76c4032ef358446f91?fid=2082810368-250528-85001194198278&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-q5Zan3NIaWpCaD6Qq6kyaiuVMZ4%3D&expires=8h&chkbd=0&chkv=0&dp-logid=4193316600199584700&dp-callid=0&time=1596092400&size=c360_u270&quality=100",
                "url3": "https://thumbnail0.baidupcs.com/thumbnail/25319465flf30b76c4032ef358446f91?fid=2082810368-250528-85001194198278&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-q5Zan3NIaWpCaD6Qq6kyaiuVMZ4%3D&expires=8h&chkbd=0&chkv=0&dp-logid=4193316600199584700&dp-callid=0&time=1596092400&size=c850_u580&quality=100"
            }
        },
        {
            "category": 4,
            "fs_id": 231830464480934,
            "isdir": 0,
            "local_ctime": 1547097898,
            "local_mtime": 1547097898,
            "md5": "08f596c15n1bd3fa383af69d4a0b677f",
            "path": "/测试目录/20160906.txt",
            "server_ctime": 1578309734,
            "server_filename": "20160906.txt",
            "server_mtime": 1596078162,
            "size": 5568,
            "thumbs": {
                "url1": "https://thumbnail0.baidupcs.com/thumbnail/08f596c15n1bd3fa383af69d4a0b677f?fid=2082810368-250528-231830464480934&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-rxqXy8qFeG7VFWj0B%2B1v8%2BeKfss%3D&expires=8h&chkbd=0&chkv=0&dp-logid=4193316660217540833&dp-callid=0&time=1596092400&size=c140_u90&quality=100",
                "url2": "https://thumbnail0.baidupcs.com/thumbnail/08f596c15n1bd3fa383af69d4a0b677f?fid=2082810368-250528-231830464480934&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-rxqXy8qFeG7VFWj0B%2B1v8%2BeKfss%3D&expires=8h&chkbd=0&chkv=0&dp-logid=4193316660217540833&dp-callid=0&time=1596092400&size=c360_u270&quality=100",
                "url3": "https://thumbnail0.baidupcs.com/thumbnail/08f596c15n1bd3fa383af69d4a0b677f?fid=2082810368-250528-231830464480934&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-rxqXy8qFeG7VFWj0B%2B1v8%2BeKfss%3D&expires=8h&chkbd=0&chkv=0&dp-logid=4193316660217540833&dp-callid=0&time=1596092400&size=c850_u580&quality=100"
            }
        },
        {
            "category": 1,
            "fs_id": 372974889986706,
            "isdir": 0,
            "local_ctime": 1472733116,
            "local_mtime": 1472729122,
            "md5": "addc44e2d26154ba44a41915d2b4270f",
            "path": "/测试目录/test.mp4",
            "server_ctime": 1472733116,
            "server_filename": "test.mp4",
            "server_mtime": 1595921251,
            "size": 47761278,
            "thumbs": {
                "icon": "https://thumbnail0.baidupcs.com/thumbnail/addc44e2d26154ba44a41915d2b4270f?fid=2082810368-250528-372974889986706&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-oQ6l5FPEK8mSVzyU21BN%2F6e0bwg%3D&expires=8h&chkbd=0&chkv=0&dp-logid=4193316708114546127&dp-callid=0&time=1596092400&size=c60_u60&quality=100&vuk=2082810368&ft=video",
                "url1": "https://thumbnail0.baidupcs.com/thumbnail/addc44e2d26154ba44a41915d2b4270f?fid=2082810368-250528-372974889986706&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-oQ6l5FPEK8mSVzyU21BN%2F6e0bwg%3D&expires=8h&chkbd=0&chkv=0&dp-logid=4193316708114546127&dp-callid=0&time=1596092400&size=c140_u90&quality=100&vuk=2082810368&ft=video",
                "url2": "https://thumbnail0.baidupcs.com/thumbnail/addc44e2d26154ba44a41915d2b4270f?fid=2082810368-250528-372974889986706&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-oQ6l5FPEK8mSVzyU21BN%2F6e0bwg%3D&expires=8h&chkbd=0&chkv=0&dp-logid=4193316708114546127&dp-callid=0&time=1596092400&size=c360_u270&quality=100&vuk=2082810368&ft=video",
                "url3": "https://thumbnail0.baidupcs.com/thumbnail/addc44e2d26154ba44a41915d2b4270f?fid=2082810368-250528-372974889986706&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-oQ6l5FPEK8mSVzyU21BN%2F6e0bwg%3D&expires=8h&chkbd=0&chkv=0&dp-logid=4193316708114546127&dp-callid=0&time=1596092400&size=c850_u580&quality=100&vuk=2082810368&ft=video"
            }
        },
        {
            "category": 4,
            "fs_id": 376509117714123,
            "isdir": 0,
            "local_ctime": 1547097902,
            "local_mtime": 1547097902,
            "md5": "b048a8fb7mfdfafbf1fba286228c4dc6",
            "path": "/测试目录/20160825.txt",
            "server_ctime": 1578310092,
            "server_filename": "20160825.txt",
            "server_mtime": 1596077685,
            "size": 3480,
            "thumbs": {
                "url1": "https://thumbnail0.baidupcs.com/thumbnail/b048a8fb7mfdfafbf1fba286228c4dc6?fid=2082810368-250528-376509117714123&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-HW3JtBFisIj8n8f8p52pJVxFCcM%3D&expires=8h&chkbd=0&chkv=0&dp-logid=4193316759458944734&dp-callid=0&time=1596092400&size=c140_u90&quality=100",
                "url2": "https://thumbnail0.baidupcs.com/thumbnail/b048a8fb7mfdfafbf1fba286228c4dc6?fid=2082810368-250528-376509117714123&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-HW3JtBFisIj8n8f8p52pJVxFCcM%3D&expires=8h&chkbd=0&chkv=0&dp-logid=4193316759458944734&dp-callid=0&time=1596092400&size=c360_u270&quality=100",
                "url3": "https://thumbnail0.baidupcs.com/thumbnail/b048a8fb7mfdfafbf1fba286228c4dc6?fid=2082810368-250528-376509117714123&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-HW3JtBFisIj8n8f8p52pJVxFCcM%3D&expires=8h&chkbd=0&chkv=0&dp-logid=4193316759458944734&dp-callid=0&time=1596092400&size=c850_u580&quality=100"
            }
        }
    ],
    "request_id": "4194083114842583994"
}
```

#### 错误码说明

| 错误码 | 描述                             |
| ------ | -------------------------------- |
| 42213  | 没有共享目录的权限               |
| 31034  | 命中频控，详情请关注【请求限制】 |
| 31066  | 文件不存在                       |

更多错误码请参考： [https://pan.baidu.com/union/document/error#%E9%94%99%E8%AF%AF%E7%A0%81%E5%88%97%E8%A1%A8](https://pan.baidu.com/union/document/error#错误码列表)

#### 请求限制

单用户单接口的QPS（每秒请求次数）上限如下。

| 分钟 | 小时 | 天   |
| ---- | ---- | ---- |
| 5    | 100  | 500  |

## 获取文档列表

### 接口概述

#### 接口功能

> 本文档主要针对需要集成http api的技术工程师。 如果您的应用已经获取用户授权，则可以通过该接口获取指定目录下的文档列表。

#### 使用条件

> 频控限制：有
> 接口鉴权：有
> 接入流程：[https://pan.baidu.com/union/document/entrance#%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B](https://pan.baidu.com/union/document/entrance#接入流程)

#### 依赖说明

> access_token: 作为访问用户数据的授权凭证

#### 其他说明

```
1.不是所有文档格式都支持预览
2.不支持预览的文件格式如下：
txt、as、sh、c、cpp、h、cs、asp、css、pas、diff、patch、erl、groovy、java、jsp、js、json、pl、php、py、rb、sass、scss、scala、sql、vb、xml、xhtml、html、htm、md、less、lua、go、bat、wml
3.文档预览流程如下：
 (1)获取文档预览地址lodocpreview,如果接口只下发了docpreview，那么lodocpreview=docpreview + "type=pdf&from=lo"
 (2)请求method=newinfo接口分页获取ndb_key， url: lodocpreview + "method=newinfo"。请求第一页，需追加参数：part_index=0,后续请求根据返回的page_num确定。请求示例如下：
curl "http://pcsdata.baidu.com/doc/d8ff5ac9ef7eaff703fbd680b952b5d8?fid=2082810368-250528-472457166704390&time=1596162239&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-LVnZSFPJQIrDDd2SaoZcliJ0A94%3d&expires=8h&chkbd=0&chkv=0&dp-logid=4926928230157132105&dp-callid=0&type=pdf&from=lo&part_index=0&method=newinfo"
 (3)method=newinfo返回示例：
 {
     "page_num":2,
     "status":"HITNDB",
     "ndb_key":"n-lodocview-qd-lo-d8ff5ac9ef7eaff703fbd680b952b5d8-convert-pdf-part-0",
     "region":"Yangquan",
     "request_id":4926928230157132105
 }
 (4)请求method=newview接口获取文件内容，url:lodocpreview + "method=newview" + "ndb_key=xxx" + "region=xxx"。请求示例如下：
curl "http://pcsdata.baidu.com/doc/d8ff5ac9ef7eaff703fbd680b952b5d8?fid=2082810368-250528-472457166704390&time=1596162239&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-LVnZSFPJQIrDDd2SaoZcliJ0A94%3d&expires=8h&chkbd=0&chkv=0&dp-logid=4926928230157132105&dp-callid=0&type=pdf&from=lo&ndb_key=n-lodocview-qd-lo-d8ff5ac9ef7eaff703fbd680b952b5d8-convert-pdf-part-0&region=yangquan&method=newview"
```

#### 问题反馈

> 参考 [https://pan.baidu.com/union/document/entrance#%E9%97%AE%E9%A2%98%E5%8F%8D%E9%A6%88](https://pan.baidu.com/union/document/entrance#问题反馈)

### 参数说明

#### 请求方式

> GET

#### 接口地址

```
https://pan.baidu.com/rest/2.0/xpan/file?method=doclist
```

#### 请求参数

| 名称         | 类型   | 必须 | 示例 | 参数位置 | 描述                                                         |
| ------------ | ------ | ---- | ---- | -------- | ------------------------------------------------------------ |
| access_token | string | 是   | ---  | query    | 接口鉴权参数                                                 |
| page         | int    | 否   | ---  | -----    | 页码，从1开始， 如果不指定页码，则为不分页模式，返回所有的结果。如果指定page参数，则按修改时间倒序排列 |
| num          | int    | 否   | ---  | -----    | 每页返回的文件数， 默认值为1000, 最大值为10000,              |
| order        | string | 否   | ---  | -----    | 排序字段：time按修改时间排序，name按文件名称排序，size按文件大小排序，默认为time |
| desc         | string | 否   | ---  | -----    | 0为升序，1为降序，默认为1                                    |
| parent_path  | string | 否   | ---  | -----    | 目录名称，默认为/                                            |
| recursion    | int    | 否   | ---  | -----    | 是否需要递归，0为不需要，1为需要，默认为0                    |
| web          | int    | 否   | ---  | -----    | 为1时返回文档预览地址lodocpreview                            |

#### 响应参数

| 参数                     | 类型   | 描述                     |
| ------------------------ | ------ | ------------------------ |
| info                     | array  | 文档列表                 |
| info[0] ["category"]     | int    | 文件类型                 |
| info[0] [" fs_id"]       | int    | 文件在云端的唯一标识     |
| info[0] ["isdir"]        | int    | 是否是目录，0为否，1为是 |
| info[0] ["local_ctime"]  | int    | 文件在客户端创建时间     |
| info[0] ["local_mtime"]  | int    | 文件在客户端修改时间     |
| info[0] ["server_ctime"] | int    | 文件在服务端创建时间     |
| info[0] ["server_mtime"] | int    | 文件在服务端修改时间     |
| info[0] ["md5"]          | string | 文件md5                  |
| info[0] ["size"]         | int    | 文件大小                 |
| info[0] ["lodocpreview"] | string | 文档预览地址             |
| info[0] ["docpreview"]   | string | 文档预览地址             |

### 示例说明

假设示例请求数据如下

| 参数         | 参数数据 | 描述                 |
| ------------ | -------- | -------------------- |
| access_token | 123.456  | 接口鉴权参数         |
| page         | 1        | 页码                 |
| num          | 5        | 每页返回的文件数量   |
| web          | 1        | 需要返回文档预览地址 |

#### curl示例

```
curl -L -X GET 'http://pan.baidu.com/rest/2.0/xpan/file?parent_path=/%E6%B5%8B%E8%AF%95%E7%9B%AE%E5%BD%95&access_token=123.456&web=1&page=1&num=5&method=doclist' \
-H 'User-Agent: pan.baidu.com' 
```

#### Python示例

```
import requests

url = "http://pan.baidu.com/rest/2.0/xpan/file?parent_path=/测试目录&access_token=123.456&web=1&page=1&num=5&method=doclist"
payload = {}
files = {}
headers = {
  'User-Agent': 'pan.baidu.com'
}
response = requests.request("GET", url, headers=headers, data = payload, files = files)
print(response.text.encode('utf8'))
```

#### 响应示例



```
{
    "errno": 0,
    "guid_info": "",
    "info": [
        {
            "server_mtime": 1596100922,
            "category": 4,
            "fs_id": 1019673715638979,
            "isdir": 0,
            "server_ctime": 1577155924,
            "lodocpreview": "http://pcsdata.baidu.com/doc/e787c81b7j757a1cdcad35efd570081c?fid=2082810368-250528-1019673715638979&time=1596100932&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-3GF1OKWVZx99gXoSiPb4l6jVv1Q%3d&expires=8h&chkbd=0&chkv=0&dp-logid=4910471291530501100&dp-callid=0&type=pdf&from=lo",
            "docpreview": "http://pcsdata.baidu.com/doc/e787c81b7j757a1cdcad35efd570081c?fid=2082810368-250528-1019673715638979&time=1596100932&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-3GF1OKWVZx99gXoSiPb4l6jVv1Q%3d&expires=8h&chkbd=0&chkv=0&dp-logid=4910471291530501100&dp-callid=0",
            "local_mtime": 1577155924,
            "size": 11922,
            "md5": "e787c81b7j757a1cdcad35efd570081c",
            "share": 0,
            "path": "/测试目录/123456.docx",
            "local_ctime": 1577155924,
            "object_key": "E-pSJzGI3Y81SEI339vyQI4gfpYCI2pEHGcI2qW6wwI3iG",
            "server_filename": "123456.docx"
        }
    ],
    "request_id": 4910058392721293193,
    "guid": 0
}
```

#### 错误码说明

更多错误码请参考： [https://pan.baidu.com/union/document/error#%E9%94%99%E8%AF%AF%E7%A0%81%E5%88%97%E8%A1%A8](https://pan.baidu.com/union/document/error#错误码列表)

#### 请求限制

单用户单接口的QPS（每秒请求次数）上限如下。

| 分钟 | 小时 | 天   |
| ---- | ---- | ---- |
| 20   | 300  | 1000 |

## 获取图片列表

### 接口概述

#### 接口功能

> 本文档主要针对需要集成http api的技术工程师。 如果您的应用已经获取用户授权，则可以通过该接口获取用户指定目录下的图片列表

#### 使用条件

> 频控限制：有
> 接口鉴权：有
> 接入流程：[https://pan.baidu.com/union/document/entrance#%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B](https://pan.baidu.com/union/document/entrance#接入流程)

#### 依赖说明

> access_token: 作为访问用户数据的授权凭证

#### 其他说明

#### 问题反馈

> 参考 [https://pan.baidu.com/union/document/entrance#%E9%97%AE%E9%A2%98%E5%8F%8D%E9%A6%88](https://pan.baidu.com/union/document/entrance#问题反馈)

### 参数说明

#### 请求方式

> GET

#### 接口地址

```
https://pan.baidu.com/rest/2.0/xpan/file?method=imagelist
```

#### 请求参数

| 名称         | 类型   | 必须 | 示例 | 参数位置 | 描述                                                         |
| ------------ | ------ | ---- | ---- | -------- | ------------------------------------------------------------ |
| access_token | string | 是   | ---  | query    | 接口鉴权参数                                                 |
| page         | int    | 否   | ---  | -----    | 页码，从1开始， 如果不指定页码，则为不分页模式，返回所有的结果。如果指定page参数，则按修改时间倒序排列 |
| num          | int    | 否   | ---  | -----    | 每页返回的文件数， 默认值为1000, 最大值为10000,              |
| order        | string | 否   | ---  | -----    | 排序字段：time按修改时间排序，name按文件名称排序，size按文件大小排序，默认为time |
| desc         | string | 否   | ---  | -----    | 0为升序，1为降序，默认为1                                    |
| parent_path  | string | 否   | ---  | -----    | 目录名称，默认为/                                            |
| recursion    | int    | 否   | ---  | -----    | 是否需要递归，0为不需要，1为需要，默认为0                    |
| web          | int    | 否   | ---  | -----    | 为1时返回文档预览地址lodocpreview                            |

#### 响应参数

| 参数                     | 类型   | 描述                     |
| ------------------------ | ------ | ------------------------ |
| info                     | array  | 文档列表                 |
| info[0] ["category"]     | int    | 文件类型                 |
| info[0] [" fs_id"]       | int    | 文件在云端的唯一标识     |
| info[0] ["isdir"]        | int    | 是否是目录，0为否，1为是 |
| info[0] ["local_ctime"]  | int    | 文件在客户端创建时间     |
| info[0] ["local_mtime"]  | int    | 文件在客户端修改时间     |
| info[0] ["server_ctime"] | int    | 文件在服务端创建时间     |
| info[0] ["server_mtime"] | int    | 文件在服务端修改时间     |
| info[0] ["md5"]          | string | 文件md5                  |
| info[0] ["size"]         | int    | 文件大小                 |
| info[0] ["thumbs"]       | string | 图片缩略图，包含三个尺寸 |

### 示例说明

假设示例请求数据如下。

| 参数         | 参数数据 | 描述               |
| ------------ | -------- | ------------------ |
| access_token | 123.456  | 接口鉴权参数       |
| web          | 1        | 需要返回图片缩略图 |
| recursion    | 1        | 需要递归           |

#### curl示例

```
curl -L -X GET 'http://pan.baidu.com/rest/2.0/xpan/file?parent_path=/%E6%B5%8B%E8%AF%95%E7%9B%AE%E5%BD%95&access_token=123.456&web=1&recursion=1&method=imagelist' \
-H 'User-Agent: pan.baidu.com'
```

#### Python示例

```
import requests

url = "http://pan.baidu.com/rest/2.0/xpan/file?parent_path=/测试目录&access_token=123.456&web=1&recursion=1&method=imagelist"
payload = {}
files = {}
headers = {
  'User-Agent': 'pan.baidu.com'
}
response = requests.request("GET", url, headers=headers, data = payload, files = files)
print(response.text.encode('utf8'))
```

#### 响应示例



```
{
    "errno": 0,
    "guid_info": "",
    "info": [
        {
            "server_mtime": 1596078006,
            "category": 3,
            "fs_id": 864448650729567,
            "server_ctime": 1475996315,
            "isdir": 0,
            "thumbs": {
                "icon": "http://thumbnail0.baidupcs.com/thumbnail/3ad446fda0d8d81302a991aef7136581?fid=2082810368-250528-864448650729567&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-Z4PEvBlPPHpCeg99YcN5GjevVPE%3d&expires=8h&chkbd=0&chkv=0&dp-logid=4912416666143072931&dp-callid=0&time=1596106800&size=c60_u60&quality=100&vuk=2082810368&ft=image",
                "url3": "http://thumbnail0.baidupcs.com/thumbnail/3ad446fda0d8d81302a991aef7136581?fid=2082810368-250528-864448650729567&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-Z4PEvBlPPHpCeg99YcN5GjevVPE%3d&expires=8h&chkbd=0&chkv=0&dp-logid=4912416666143072931&dp-callid=0&time=1596106800&size=c850_u580&quality=100&vuk=2082810368&ft=image",
                "url2": "http://thumbnail0.baidupcs.com/thumbnail/3ad446fda0d8d81302a991aef7136581?fid=2082810368-250528-864448650729567&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-Z4PEvBlPPHpCeg99YcN5GjevVPE%3d&expires=8h&chkbd=0&chkv=0&dp-logid=4912416666143072931&dp-callid=0&time=1596106800&size=c360_u270&quality=100&vuk=2082810368&ft=image",
                "url1": "http://thumbnail0.baidupcs.com/thumbnail/3ad446fda0d8d81302a991aef7136581?fid=2082810368-250528-864448650729567&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b08120 Z4PEvBlPPHpCeg99YcN5GjevVPE%3d&expires=8h&chkbd=0&chkv=0&dp-logid=4912416666143072931&dp-callid=0&time=1596106800&size=c140_u90&quality=100&vuk=2082810368&ft=image"
            },
            "local_mtime": 1475996315,
            "size": 233999,
            "md5": "3ad446fda0d8d81302a991aef7136581",
            "share": 0,
            "path": "/测试目录/testnac/水上乐园.jpg",
            "local_ctime": 1475996315,
            "object_key": "E-pSuWkI1vT0NoI4DGZ21I38zy7fI2boaaiI2lckToI14ZZ",
            "server_filename": "水上乐园.jpg"
        }
   ],
   "request_id": 4912416666143072931,
   "guid": 0
}
```

#### 错误码说明

更多错误码请参考： [https://pan.baidu.com/union/document/error#%E9%94%99%E8%AF%AF%E7%A0%81%E5%88%97%E8%A1%A8](https://pan.baidu.com/union/document/error#错误码列表)

#### 请求限制

单用户单接口的QPS（每秒请求次数）上限如下。

| 分钟 | 小时 | 天   |
| ---- | ---- | ---- |
| 20   | 300  | 1000 |

## 获取视频列表

### 接口概述

#### 接口功能

> 本文档主要针对需要集成http api的技术工程师。 如果您的应用已经获取用户授权，则可以通过该接口获取用户指定目录下的视频列表

#### 使用条件

> 频控限制：有
> 接口鉴权：有
> 接入流程：[https://pan.baidu.com/union/document/entrance#%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B](https://pan.baidu.com/union/document/entrance#接入流程)

#### 依赖说明

> access_token: 作为访问用户数据的授权凭证

#### 其他说明

#### 问题反馈

> 参考 [https://pan.baidu.com/union/document/entrance#%E9%97%AE%E9%A2%98%E5%8F%8D%E9%A6%88](https://pan.baidu.com/union/document/entrance#问题反馈)

### 参数说明

#### 请求方式

> GET

#### 接口地址

```
https://pan.baidu.com/rest/2.0/xpan/file?method=videolist
```

#### 请求参数

| 名称         | 类型   | 必须 | 示例 | 参数位置 | 描述                                                         |
| ------------ | ------ | ---- | ---- | -------- | ------------------------------------------------------------ |
| access_token | string | 是   | ---  | query    | 接口鉴权参数                                                 |
| page         | int    | 否   | ---  | -----    | 页码，从1开始， 如果不指定页码，则为不分页模式，返回所有的结果。如果指定page参数，则按修改时间倒序排列 |
| num          | int    | 否   | ---  | -----    | 每页返回的文件数， 默认值为1000, 最大值为10000,              |
| order        | string | 否   | ---  | -----    | 排序字段：time按修改时间排序，name按文件名称排序，size按文件大小排序，默认为time |
| desc         | string | 否   | ---  | -----    | 0为升序，1为降序，默认为1                                    |
| parent_path  | string | 否   | ---  | -----    | 目录名称，默认为/                                            |
| recursion    | int    | 否   | ---  | -----    | 是否需要递归，0为不需要，1为需要，默认为0                    |

#### 响应参数

| 参数                     | 类型   | 描述                     |
| ------------------------ | ------ | ------------------------ |
| info                     | array  | 视频列表                 |
| info[0] ["category"]     | int    | 文件类型                 |
| info[0] [" fs_id"]       | int    | 文件在云端的唯一标识     |
| info[0] ["isdir"]        | int    | 是否是目录，0为否，1为是 |
| info[0] ["local_ctime"]  | int    | 文件在客户端创建时间     |
| info[0] ["local_mtime"]  | int    | 文件在客户端修改时间     |
| info[0] ["server_ctime"] | int    | 文件在服务端创建时间     |
| info[0] ["server_mtime"] | int    | 文件在服务端修改时间     |
| info[0] ["md5"]          | string | 文件md5                  |
| info[0] ["size"]         | int    | 文件大小                 |
| info[0] ["thumbs"]       | string | 缩略图，包含三个尺寸     |

### 示例说明

假设示例请求数据如下

| 参数         | 参数数据 | 描述               |
| ------------ | -------- | ------------------ |
| access_token | 123.456  | 接口鉴权参数       |
| web          | 1        | 需要返回图片缩略图 |
| recursion    | 1        | 需要递归           |

#### curl示例

```
curl -L -X GET 'http://pan.baidu.com/rest/2.0/xpan/file?parent_path=/%E6%B5%8B%E8%AF%95%E7%9B%AE%E5%BD%95&access_token=123.456&web=1&recursion=1&method=videolist' \
-H 'User-Agent: pan.baidu.com' 
```

#### Python示例

```
import requests

url = "http://pan.baidu.com/rest/2.0/xpan/file?parent_path=/测试目录&access_token=123.456g&web=1&recursion=1&method=videolist"
payload = {}
files = {}
headers = {
  'User-Agent': 'pan.baidu.com'
}
response = requests.request("GET", url, headers=headers, data = payload, files = files)
print(response.text.encode('utf8'))
```

#### 响应示例



```
{
    "errno": 0,
    "guid_info": "",
    "info": [
        {
            "server_mtime": 1595921251,
            "category": 1,
            "fs_id": 372974889986706,
            "server_ctime": 1472733116,
            "isdir": 0,
            "thumbs": {
                "icon": "http://thumbnail0.baidupcs.com/thumbnail/addc44e2d26154ba44a41915d2b4270f?fid=2082810368-250528-372974889986706&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-b49skp%2bR8v9f%2b5Fgry8xVc9NHxE%3d&expires=8h&chkbd=0&chkv=0&dp-logid=4935205160474857723&dp-callid=0&time=1596189600&size=c60_u60&quality=100&vuk=2082810368&ft=video",
                "url3": "http://thumbnail0.baidupcs.com/thumbnail/addc44e2d26154ba44a41915d2b4270f?fid=2082810368-250528-372974889986706&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-b49skp%2bR8v9f%2b5Fgry8xVc9NHxE%3d&expires=8h&chkbd=0&chkv=0&dp-logid=4935205160474857723&dp-callid=0&time=1596189600&size=c850_u580&quality=100&vuk=2082810368&ft=video",
                "url2": "http://thumbnail0.baidupcs.com/thumbnail/addc44e2d26154ba44a41915d2b4270f?fid=2082810368-250528-372974889986706&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-b49skp%2bR8v9f%2b5Fgry8xVc9NHxE%3d&expires=8h&chkbd=0&chkv=0&dp-logid=4935205160474857723&dp-callid=0&time=1596189600&size=c360_u270&quality=100&vuk=2082810368&ft=video",
                "url1": "http://thumbnail0.baidupcs.com/thumbnail/addc44e2d26154ba44a41915d2b4270f?fid=2082810368-250528-372974889986706&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-b49skp%2bR8v9f%2b5Fgry8xVc9NHxE%3d&expires=8h&chkbd=0&chkv=0&dp-logid=4935205160474857723&dp-callid=0&time=1596189600&size=c140_u90&quality=100&vuk=2082810368&ft=video"
            },
            "local_mtime": 1472729122,
            "size": 47761278,
            "md5": "addc44e2d26154ba44a41915d2b4270f",
            "share": 0,
            "path": "/测试目录/test.mp4",
            "local_ctime": 1472733116,
            "object_key": "E-pSD78I1taw81I1OEZgRIwspHgIPxY52I38XHENI3F71i",
            "server_filename": "test.mp4"
        }
    ],
    "request_id": 4935205160474857723,
    "guid": 0
}
```

#### 错误码说明

更多错误码请参考： [https://pan.baidu.com/union/document/error#%E9%94%99%E8%AF%AF%E7%A0%81%E5%88%97%E8%A1%A8](https://pan.baidu.com/union/document/error#错误码列表)

#### 请求限制

单用户单接口的QPS（每秒请求次数）上限如下。

| 分钟 | 小时 | 天   |
| ---- | ---- | ---- |
| 20   | 300  | 1000 |

## 获取bt列表

### 接口概述

#### 接口功能

> 本文档主要针对需要集成http api的技术工程师。 如果您的应用已经获取用户授权，则可以通过该接口获取用户指定路径下的bt文件列表。

#### 使用条件

> 频控限制：有
> 接口鉴权：有
> 接入流程：[https://pan.baidu.com/union/document/entrance#%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B](https://pan.baidu.com/union/document/entrance#接入流程)

#### 依赖说明

> access_token: 作为访问用户数据的授权凭证

#### 其他说明

#### 问题反馈

> 参考 [https://pan.baidu.com/union/document/entrance#%E9%97%AE%E9%A2%98%E5%8F%8D%E9%A6%88](https://pan.baidu.com/union/document/entrance#问题反馈)

### 参数说明

#### 请求方式

> GET

#### 接口地址

```
https://pan.baidu.com/rest/2.0/xpan/file?method=btlist
```

#### 请求参数

| 名称         | 类型   | 必须 | 示例 | 参数位置 | 描述                                                         |
| ------------ | ------ | ---- | ---- | -------- | ------------------------------------------------------------ |
| access_token | string | 是   | ---  | query    | 接口鉴权参数                                                 |
| page         | int    | 否   | ---  | -----    | 页码，从1开始， 如果不指定页码，则为不分页模式，返回所有的结果。如果指定page参数，则按修改时间倒序排列 |
| num          | int    | 否   | ---  | -----    | 每页返回的文件数， 默认值为1000, 最大值为10000,              |
| order        | string | 否   | ---  | -----    | 排序字段：time按修改时间排序，name按文件名称排序，size按文件大小排序，默认为time |
| desc         | string | 否   | ---  | -----    | 0为升序，1为降序，默认为1                                    |
| parent_path  | string | 否   | ---  | -----    | 目录名称，默认为/                                            |
| recursion    | int    | 否   | ---  | -----    | 是否需要递归，0为不需要，1为需要，默认为0                    |

#### 响应参数

| 参数                     | 类型   | 描述                     |
| ------------------------ | ------ | ------------------------ |
| info                     | array  | 视频列表                 |
| info[0] ["category"]     | int    | 文件类型                 |
| info[0] [" fs_id"]       | int    | 文件在云端的唯一标识     |
| info[0] ["isdir"]        | int    | 是否是目录，0为否，1为是 |
| info[0] ["local_ctime"]  | int    | 文件在客户端创建时间     |
| info[0] ["local_mtime"]  | int    | 文件在客户端修改时间     |
| info[0] ["server_ctime"] | int    | 文件在服务端创建时间     |
| info[0] ["server_mtime"] | int    | 文件在服务端修改时间     |
| info[0] ["md5"]          | string | 文件md5                  |
| info[0] ["size"]         | int    | 文件大小                 |

### 8-示例说明

假设示例请求数据如下

| 参数         | 参数数据 | 描述               |
| ------------ | -------- | ------------------ |
| access_token | 123.456  | 接口鉴权参数       |
| web          | 1        | 需要返回图片缩略图 |
| recursion    | 1        | 需要递归           |

#### curl示例

```
curl -L -X GET 'http://pan.baidu.com/rest/2.0/xpan/file?parent_path=/%E6%B5%8B%E8%AF%95%E7%9B%AE%E5%BD%95&access_token=123.456&web=1&recursion=1&method=btlist' \
-H 'User-Agent: pan.baidu.com' 
```

#### Python示例

```
import requests

url = "http://pan.baidu.com/rest/2.0/xpan/file?parent_path=/测试目录&access_token=123.456&web=1&recursion=1&method=btlist"
payload = {}
files = {}
headers = {
  'User-Agent': 'pan.baidu.com',
  'Cookie': 'PANWEB=1; BAIDUID=AC26BE01592777C2F2253ECBC0E5780B:FG=1'
}
response = requests.request("GET", url, headers=headers, data = payload, files = files)
print(response.text.encode('utf8'))
```

#### 响应示例



```
{
    "errno": 0,
    "guid_info": "",
    "info": [
        {
            "server_mtime": 1596193890,
            "category": 7,
            "fs_id": 54255724579656,
            "server_ctime": 1596193890,
            "isdir": 0,
            "local_mtime": 1584350961,
            "size": 135022,
            "md5": "2748c6110j2c278b94f77dcd216eae6a",
            "share": 0,
            "path": "/测试目录/test.torrent",
            "local_ctime": 1596193820,
            "object_key": "E-pSAAnI53pGcZI2Pb4mtI28P5h8I1dlfz1I43NMhkIBum",
            "server_filename": "test.torrent"
        }
    ],
    "request_id": 4935433747199695687,
    "guid": 0
}
```

#### 错误码说明

更多错误码请参考： [https://pan.baidu.com/union/document/error#%E9%94%99%E8%AF%AF%E7%A0%81%E5%88%97%E8%A1%A8](https://pan.baidu.com/union/document/error#错误码列表)

#### 请求限制

单用户单接口的QPS（每秒请求次数）上限如下。

| 分钟 | 小时 | 天   |
| ---- | ---- | ---- |
| 20   | 300  | 1000 |

## 获取分类文件总个数

### 接口概述

#### 接口功能

> 本文档主要针对需要集成http api的技术工程师。 如果您的应用已经获取用户授权，则可以通过该接口获取用户指定目录下指定类型的文件数量。

#### 使用条件

> 频控限制：有
> 接口鉴权：有
> 接入流程：[https://pan.baidu.com/union/document/entrance#%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B](https://pan.baidu.com/union/document/entrance#接入流程)

#### 依赖说明

> access_token: 作为访问用户数据的授权凭证

#### 其他说明

#### 问题反馈

> 参考 [https://pan.baidu.com/union/document/entrance#%E9%97%AE%E9%A2%98%E5%8F%8D%E9%A6%88](https://pan.baidu.com/union/document/entrance#问题反馈)

### 参数说明

#### 请求方式

> GET

#### 接口地址

```
https://pan.baidu.com/api/categoryinfo
```

#### 请求参数

| 名称         | 类型   | 必须 | 示例 | 参数位置 | 描述                                                         |
| ------------ | ------ | ---- | ---- | -------- | ------------------------------------------------------------ |
| access_token | string | 是   | ---  | query    | 接口鉴权参数                                                 |
| category     | int    | 是   | ---  | ------   | 文件类型，1 视频、2 音频、3 图片、4 文档、5 应用、6 其他、7 种子 |
| parent_path  | string | 否   | ---  | ------   | 目录名称，为空时，parent_path = "/" && recursion = 1         |
| recursion    | int    | 否   | ---  | -----    | 是否递归，0 不递归、1 递归，默认0                            |

#### 响应参数

| 参数  | 类型 | 描述     |
| ----- | ---- | -------- |
| count | int  | 文件数量 |

### 示例说明

假设示例请求数据如下

| 参数         | 参数数据  | 描述           |
| ------------ | --------- | -------------- |
| access_token | 123.456   | 接口授权参数   |
| category     | 3         | 文件类型，图片 |
| parent_path  | /测试目录 | 目录名称       |
| recursion    | 0         | 不需要递归     |

#### curl示例

```
curl -L -X GET 'http://pan.baidu.com/api/categoryinfo?parent_path=/%E6%B5%8B%E8%AF%95%E7%9B%AE%E5%BD%95&access_token=123.456&category=3&recursion=0' \
-H 'User-Agent: pan.baidu.com' 
```

#### Python示例

```
import requests

url = "http://pan.baidu.com/api/categoryinfo?parent_path=/测试目录&access_token=123.456&category=3&recursion=0"
payload = {}
files = {}
headers = {
  'User-Agent': 'pan.baidu.com'
}
response = requests.request("GET", url, headers=headers, data = payload, files = files)
print(response.text.encode('utf8'))
```

#### 响应示例



```
{
    "errno": 0,
    "info": {
        "3": {
            "total": 2,
            "size": 3746464,
            "count": 2
        }
    },
    "request_id": 5000835837369146640
}
```

#### 错误码说明

更多错误码请参考： [https://pan.baidu.com/union/document/error#%E9%94%99%E8%AF%AF%E7%A0%81%E5%88%97%E8%A1%A8](https://pan.baidu.com/union/document/error#错误码列表)

#### 请求限制

单用户单接口的QPS（每秒请求次数）上限如下。

| 分钟 | 小时 | 天   |
| ---- | ---- | ---- |
| 20   | 300  | 1000 |

## 获取分类列表文件

### 接口概述

#### 接口功能

> 本文档主要针对需要集成http api的技术工程师。 如果您的应用已经获取用户授权，则可以通过该接口获取用户目录下指定类型的文件列表。

> 频控限制：有
> 接口鉴权：有
> 接入流程：[https://pan.baidu.com/union/document/entrance#%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B](https://pan.baidu.com/union/document/entrance#接入流程)

#### 依赖说明

> access_token: 作为访问用户数据的授权凭证

#### 其他说明

```
1.此接口具有频率限制，详情请参考【请求限制】
```

#### 问题反馈

> 参考 [https://pan.baidu.com/union/document/entrance#%E9%97%AE%E9%A2%98%E5%8F%8D%E9%A6%88](https://pan.baidu.com/union/document/entrance#问题反馈)

### 参数说明

#### 请求方式

> GET

#### 接口地址

```
 https://pan.baidu.com/rest/2.0/xpan/multimedia?method=categorylist
```

#### 请求参数

| 名称         | 类型   | 必须 | 示例 | 参数位置 | 描述                                                         |
| ------------ | ------ | ---- | ---- | -------- | ------------------------------------------------------------ |
| access_token | string | 是   | ---  | query    | 接口鉴权参数                                                 |
| category     | int    | 是   | ---  | ----     | 文件类型，1 视频、2 音频、3 图片、4 文档、5 应用、6 其他、7 种子 多个category使用英文逗号分隔，示例：3,4 |
| parent_path  | string | 否   | ---  | ----     | 目录名称，为空时，parent_path = "/" && recursion = 1         |
| recursion    | int    | 否   | ---  | ----     | 是否需要递归，0 不递归、1 递归，默认0                        |
| ext          | string | 否   | ---  | ----     | 需要的文件格式，多个格式以英文逗号分隔，示例: txt,epub，默认为category下所有格式 |
| start        | int    | 否   | ---  | ----     | 查询起点，默认为0                                            |
| limit        | int    | 否   | ---  | ----     | 查询数目，最大1000，默认1000                                 |
| order        | string | 否   | ---  | ----     | 排序字段： time按修改时间排序，name按文件名称排序，size按文件大小排序，默认为time |
| desc         | string | 否   | ---  | ----     | 0为升序，1为降序，默认为1                                    |

#### 响应参数

| 参数                        | 类型       | 描述                        |
| --------------------------- | ---------- | --------------------------- |
| cursor                      | int        | 下一次查询的起点            |
| has_more                    | int        | 是否还有数据，0没有，1有    |
| list                        | json array | 文件列表                    |
| list[0] ["category"]        | int        | 文件类型                    |
| list[0] ["fs_id"]           | int        | 文件id,文件在云端的唯一标识 |
| list[0] ["md5"]             | string     | 文件md5                     |
| list[0] ["server_ctime"]    | int        | 文件服务端创建时间          |
| list[0] ["server_mtime"]    | int        | 文件服务端修改时间          |
| list[0] ["server_filename"] | string     | 服务端文件名                |
| list[0] ["size"]            | int        | 文件大小                    |
| list[0] ["thumbs"]          | string     | 文件缩略图                  |

### 示例说明

假设示例请求数据如下

| 参数         | 参数数据          | 描述                |
| ------------ | ----------------- | ------------------- |
| access_token | 123.456           | 接口鉴权参数        |
| category     | 3                 | 文件类型，图片      |
| parent_path  | /测试目录/testnac | 目录名称            |
| recursion    | 1                 | 需要递归            |
| ext          | jpg               | 过滤图片中的jpg格式 |
| order        | time              | 默认time            |
| desc         | 1                 | 默认降序            |

#### curl示例

```
curl -L -X GET 'http://pan.baidu.com/rest/2.0/xpan/multimedia?access_token=123.456g&category=3&recursion=1&method=categorylist&parent_path=/%E6%B5%8B%E8%AF%95%E7%9B%AE%E5%BD%95/testnac&ext=jpg&order=time&desc=1' \
-H 'User-Agent: pan.baidu.com' 
```

#### Python示例

```
import requests

url = "http://pan.baidu.com/rest/2.0/xpan/multimedia?access_token=123.456&category=3&recursion=1&method=categorylist&parent_path=/测试目录/testnac&ext=jpg&order=time&desc=1"
payload = {}
files = {}
headers = {
  'User-Agent': 'pan.baidu.com'
}
response = requests.request("GET", url, headers=headers, data = payload, files = files)
print(response.text.encode('utf8'))
```

#### 响应示例



```
{
    "cursor": 2,
    "errmsg": "succ",
    "errno": 0,
    "has_more": 0,
    "list": [
        {
            "category": 3,
            "fs_id": 864448650729567,
            "md5": "3ad446fda0d8d81302a991aef7136581",
            "path": "/测试目录/testnac/水上乐园.jpg",
            "server_ctime": 1475996315,
            "server_filename": "水上乐园.jpg",
            "server_mtime": 1596078006,
            "size": 233999,
            "thumbs": {
                "icon": "https://thumbnail0.baidupcs.com/thumbnail/3ad446fda0d8d81302a991aef7136581?fid=2082810368-250528-864448650729567&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-2Rco6YwFzn5w6Sney6%2B82IxeMIg%3D&expires=8h&chkbd=0&chkv=0&dp-logid=39533323188351335&dp-callid=0&time=1596438000&size=c60_u60&quality=100&vuk=2082810368&ft=image",
                "url1": "https://thumbnail0.baidupcs.com/thumbnail/3ad446fda0d8d81302a991aef7136581?fid=2082810368-250528-864448650729567&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-2Rco6YwFzn5w6Sney6%2B82IxeMIg%3D&expires=8h&chkbd=0&chkv=0&dp-logid=39533323188351335&dp-callid=0&time=1596438000&size=c140_u90&quality=100&vuk=2082810368&ft=image",
                "url2": "https://thumbnail0.baidupcs.com/thumbnail/3ad446fda0d8d81302a991aef7136581?fid=2082810368-250528-864448650729567&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-2Rco6YwFzn5w6Sney6%2B82IxeMIg%3D&expires=8h&chkbd=0&chkv=0&dp-logid=39533323188351335&dp-callid=0&time=1596438000&size=c360_u270&quality=100&vuk=2082810368&ft=image",
                "url3": "https://thumbnail0.baidupcs.com/thumbnail/3ad446fda0d8d81302a991aef7136581?fid=2082810368-250528-864448650729567&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-2Rco6YwFzn5w6Sney6%2B82IxeMIg%3D&expires=8h&chkbd=0&chkv=0&dp-logid=39533323188351335&dp-callid=0&time=1596438000&size=c850_u580&quality=100&vuk=2082810368&ft=image"
            }
        },
        {
            "category": 3,
            "fs_id": 990873412526646,
            "md5": "9d20df12122dec7dd890d42e2e489275",
            "path": "/测试目录/testnac/jbp_map.jpg",
            "server_ctime": 1475996302,
            "server_filename": "jbp_map.jpg",
            "server_mtime": 1596077974,
            "size": 846859,
            "thumbs": {
                "icon": "https://thumbnail0.baidupcs.com/thumbnail/9d20df12122dec7dd890d42e2e489275?fid=2082810368-250528-990873412526646&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-j1rtB54bbaUfHGTgqVP3I473%2FVY%3D&expires=8h&chkbd=0&chkv=0&dp-logid=39533381341114437&dp-callid=0&time=1596438000&size=c60_u60&quality=100&vuk=2082810368&ft=image",
                "url1": "https://thumbnail0.baidupcs.com/thumbnail/9d20df12122dec7dd890d42e2e489275?fid=2082810368-250528-990873412526646&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-j1rtB54bbaUfHGTgqVP3I473%2FVY%3D&expires=8h&chkbd=0&chkv=0&dp-logid=39533381341114437&dp-callid=0&time=1596438000&size=c140_u90&quality=100&vuk=2082810368&ft=image",
                "url2": "https://thumbnail0.baidupcs.com/thumbnail/9d20df12122dec7dd890d42e2e489275?fid=2082810368-250528-990873412526646&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-j1rtB54bbaUfHGTgqVP3I473%2FVY%3D&expires=8h&chkbd=0&chkv=0&dp-logid=39533381341114437&dp-callid=0&time=1596438000&size=c360_u270&quality=100&vuk=2082810368&ft=image",
                "url3": "https://thumbnail0.baidupcs.com/thumbnail/9d20df12122dec7dd890d42e2e489275?fid=2082810368-250528-990873412526646&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-j1rtB54bbaUfHGTgqVP3I473%2FVY%3D&expires=8h&chkbd=0&chkv=0&dp-logid=39533381341114437&dp-callid=0&time=1596438000&size=c850_u580&quality=100&vuk=2082810368&ft=image"
            }
        }
    ],
    "request_id": "40241514794500477"
}
```

#### 错误码说明

更多错误码请参考： [https://pan.baidu.com/union/document/error#%E9%94%99%E8%AF%AF%E7%A0%81%E5%88%97%E8%A1%A8](https://pan.baidu.com/union/document/error#错误码列表)

#### 请求限制

单用户单接口的QPS（每秒请求次数）上限如下。

| 分钟 | 小时 | 天   |
| ---- | ---- | ---- |
| 10   | 100  | 300  |

## 搜索文件

### 接口概述

#### 接口功能

> 本文档主要针对需要集成http api的技术工程师。 如果您的应用已经获取用户授权，则可以通过该接口获取用户指定目录下，包含指定关键字的文件列表。

#### 使用条件

> 频控限制：有
> 接口鉴权：有
> 接入流程：[https://pan.baidu.com/union/document/entrance#%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B](https://pan.baidu.com/union/document/entrance#接入流程)

#### 依赖说明

> access_token: 作为访问用户数据的授权凭证

#### 其他说明

#### 问题反馈

> 参考 [https://pan.baidu.com/union/document/entrance#%E9%97%AE%E9%A2%98%E5%8F%8D%E9%A6%88](https://pan.baidu.com/union/document/entrance#问题反馈)

### 参数说明

#### 请求方式

> GET

#### 接口地址

```
https://pan.baidu.com/rest/2.0/xpan/file?method=search
```

#### 请求参数

| 名称         | 类型   | 必须 | 示例 | 参数位置 | 描述                                 |
| ------------ | ------ | ---- | ---- | -------- | ------------------------------------ |
| access_token | string | 是   | ---- | query    | 接口鉴权参数                         |
| key          | string | 是   | ---- | -----    | 搜索关键字                           |
| dir          | string | 否   | ---- | ------   | 搜索目录，默认根目录                 |
| recursion    | string | 否   | ---- | -----    | 是否递归，0不递归，1递归，默认0      |
| page         | int    | 否   | ---- | -----    | 页数，从1开始，缺省则返回所有条目    |
| num          | int    | 否   | ---- | -----    | 每页条目数，默认为1000，最大值为1000 |
| web          | int    | 否   | ---- | -----    | 默认0，为1时返回缩略图信息           |

#### 响应参数

| 参数                     | 类型   | 描述                     |
| ------------------------ | ------ | ------------------------ |
| has_more                 | int    | 是否还有下一页           |
| list                     | array  | 文件列表                 |
| list[0] ["category"]     | int    | 文件类型                 |
| list[0] [" fs_id"]       | int    | 文件在云端的唯一标识     |
| list[0] ["isdir"]        | int    | 是否是目录，0为否，1为是 |
| list[0] ["local_ctime"]  | int    | 文件在客户端创建时间     |
| list[0] ["local_mtime"]  | int    | 文件在客户端修改时间     |
| list[0] ["server_ctime"] | int    | 文件在服务端创建时间     |
| list[0] ["server_mtime"] | int    | 文件在服务端修改时间     |
| list[0] ["md5"]          | string | 文件md5                  |
| list[0] ["size"]         | int    | 文件大小                 |
| list[0] ["thumbs"]       | string | 缩略图地址               |

### 示例说明

假设示例请求数据如下

| 参数         | 参数数据  | 描述           |
| ------------ | --------- | -------------- |
| access_token | 123.456   | 接口鉴权参数   |
| key          | mmexport  | 搜索关键字     |
| dir          | /测试目录 | 搜索目录       |
| web          | 1         | 需要返回缩略图 |
| recursion    | 1         | 递归           |

#### curl示例

```
curl -L -X GET 'http://pan.baidu.com/rest/2.0/xpan/file?dir=/%E6%B5%8B%E8%AF%95%E7%9B%AE%E5%BD%95&access_token=123.456&web=1&recursion=1&page=1&num=2&method=search&key=mmexport' \
-H 'User-Agent: pan.baidu.com' 
```

#### Python示例

```
import requests

url = "http://pan.baidu.com/rest/2.0/xpan/file?dir=/测试目录&access_token=123.456&web=1&recursion=1&page=1&num=2&method=search&key=mmexport"
payload = {}
files = {}
headers = {
  'User-Agent': 'pan.baidu.com'
}
response = requests.request("GET", url, headers=headers, data = payload, files = files)
print(response.text.encode('utf8'))
```

#### 响应示例



```
{
    "errno": 0,
    "list": [
        {
            "fs_id": 116244312814490,
            "path": "/测试目录/testnac/mmexport1589760367195.gif",
            "server_filename": "mmexport1589760367195.gif",
            "size": 30728,
            "server_mtime": 1596077866,
            "server_ctime": 1594367179,
            "local_mtime": 1589760367,
            "local_ctime": 1589760367,
            "isdir": 0,
            "category": 3,
            "share": 0,
            "oper_id": 2082810368,
            "extent_tinyint1": 0,
            "md5": "fe576033bnd89833c370ab6912246b85",
            "thumbs": {
                "url1": "http://thumbnail0.baidupcs.com/thumbnail/fe576033bnd89833c370ab6912246b85?fid=2082810368-250528-116244312814490&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-AZ9ikmAFZ73LwDcDsrN2kRZ11Uk%3D&expires=8h&chkv=0&chkbd=0&chkpc=&dp-logid=4927522320290083723&dp-callid=0&time=1596164400&size=c140_u90&quality=100&vuk=2082810368&ft=image",
                "url2": "http://thumbnail0.baidupcs.com/thumbnail/fe576033bnd89833c370ab6912246b85?fid=2082810368-250528-116244312814490&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-AZ9ikmAFZ73LwDcDsrN2kRZ11Uk%3D&expires=8h&chkv=0&chkbd=0&chkpc=&dp-logid=4927522320290083723&dp-callid=0&time=1596164400&size=c360_u270&quality=100&vuk=2082810368&ft=image",
                "url3": "http://thumbnail0.baidupcs.com/thumbnail/fe576033bnd89833c370ab6912246b85?fid=2082810368-250528-116244312814490&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-AZ9ikmAFZ73LwDcDsrN2kRZ11Uk%3D&expires=8h&chkv=0&chkbd=0&chkpc=&dp-logid=4927522320290083723&dp-callid=0&time=1596164400&size=c850_u580&quality=100&vuk=2082810368&ft=image",
                "icon": "http://thumbnail0.baidupcs.com/thumbnail/fe576033bnd89833c370ab6912246b85?fid=2082810368-250528-116244312814490&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-AZ9ikmAFZ73LwDcDsrN2kRZ11Uk%3D&expires=8h&chkv=0&chkbd=0&chkpc=&dp-logid=4927522320290083723&dp-callid=0&time=1596164400&size=c60_u60&quality=100&vuk=2082810368&ft=image"
            }
        },
        {
            "fs_id": 1060489721865574,
            "path": "/测试目录/testnac/mmexport1589760383746.gif",
            "server_filename": "mmexport1589760383746.gif",
            "size": 69326,
            "server_mtime": 1596077866,
            "server_ctime": 1594367178,
            "local_mtime": 1589760383,
            "local_ctime": 1589760383,
            "isdir": 0,
            "category": 3,
            "share": 0,
            "oper_id": 2082810368,
            "extent_tinyint1": 0,
            "md5": "a095133d1qf350ebae1304f28ad3e885",
            "thumbs": {
                "url1": "http://thumbnail0.baidupcs.com/thumbnail/a095133d1qf350ebae1304f28ad3e885?fid=2082810368-250528-1060489721865574&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-m49icWaRz0omTy6TQKrTu3tlhYk%3D&expires=8h&chkv=0&chkbd=0&chkpc=&dp-logid=4927522320290083723&dp-callid=0&time=1596164400&size=c140_u90&quality=100&vuk=2082810368&ft=image",
                "url2": "http://thumbnail0.baidupcs.com/thumbnail/a095133d1qf350ebae1304f28ad3e885?fid=2082810368-250528-1060489721865574&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-m49icWaRz0omTy6TQKrTu3tlhYk%3D&expires=8h&chkv=0&chkbd=0&chkpc=&dp-logid=4927522320290083723&dp-callid=0&time=1596164400&size=c360_u270&quality=100&vuk=2082810368&ft=image",
                "url3": "http://thumbnail0.baidupcs.com/thumbnail/a095133d1qf350ebae1304f28ad3e885?fid=2082810368-250528-1060489721865574&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-m49icWaRz0omTy6TQKrTu3tlhYk%3D&expires=8h&chkv=0&chkbd=0&chkpc=&dp-logid=4927522320290083723&dp-callid=0&time=1596164400&size=c850_u580&quality=100&vuk=2082810368&ft=image",
                "icon": "http://thumbnail0.baidupcs.com/thumbnail/a095133d1qf350ebae1304f28ad3e885?fid=2082810368-250528-1060489721865574&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-m49icWaRz0omTy6TQKrTu3tlhYk%3D&expires=8h&chkv=0&chkbd=0&chkpc=&dp-logid=4927522320290083723&dp-callid=0&time=1596164400&size=c60_u60&quality=100&vuk=2082810368&ft=image"
            }
        }
    ],
    "request_id": 4927522320290083723,
    "contentlist": [],
    "has_more": 1
}
```

#### 错误码说明

更多错误码请参考： [https://pan.baidu.com/union/document/error#%E9%94%99%E8%AF%AF%E7%A0%81%E5%88%97%E8%A1%A8](https://pan.baidu.com/union/document/error#错误码列表)

#### 请求限制

单用户单接口的QPS（每秒请求次数）上限如下。

| 分钟 | 小时 | 天   |
| ---- | ---- | ---- |
| 20   | 300  | 1000 |

## 查询文件信息

### 接口概述

#### 接口功能

> 本文档主要针对需要集成http api的技术工程师。 如果您的应用已经获取用户授权，则可以通过该接口获取用户指定文件的meta信息。

#### 使用条件

> 频控限制：有
> 接口鉴权：有
> 接入流程：[https://pan.baidu.com/union/document/entrance#%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B](https://pan.baidu.com/union/document/entrance#接入流程)

#### 依赖说明

> access_token: 作为访问用户数据的授权凭证

#### 其他说明

#### 问题反馈

> 参考 [https://pan.baidu.com/union/document/entrance#%E9%97%AE%E9%A2%98%E5%8F%8D%E9%A6%88](https://pan.baidu.com/union/document/entrance#问题反馈)

### 参数说明

#### 请求方式

> GET

#### 接口地址

```
https://pan.baidu.com/rest/2.0/xpan/multimedia?method=filemetas
```

#### 请求参数

| 名称         | 类型   | 必须 | 示例 | 参数位置 | 描述                                                         |
| ------------ | ------ | ---- | ---- | -------- | ------------------------------------------------------------ |
| access_token | string | 是   | ---  | query    | 接口鉴权参数                                                 |
| fsids        | array  | 是   | ---  | -----    | 文件id数组，数组中元素是uint64类型，数组大小上限是：100      |
| path         | string | 否   | ---  | -----    | 查询共享目录时需要，格式： /uk-fsid 其中uk为共享目录创建者id， fsid对应共享目录的fsid |
| thumb        | int    | 否   | ---  | -----    | 是否需要缩略图地址，0为否，1为是，默认为0                    |
| dlink        | int    | 否   | ---  | -----    | 是否需要下载地址，0为否，1为是，默认为0                      |
| extra        | int    | 否   | ---  | -----    | 图片是否需要拍摄时间、原图分辨率等其他信息，0 否、1 是，默认0 |

#### 响应参数

| 参数                     | 类型       | 描述                                                       |
| ------------------------ | ---------- | ---------------------------------------------------------- |
| list                     | json array | 文件信息列表                                               |
| names                    | json       | 如果查询共享目录，该字段为共享目录文件上传者的uk和账户名称 |
| list[0] ["category"]     | int        | 文件类型                                                   |
| list[0] ["dlink”]        | string     | 文件下载地址                                               |
| list[0] ["file_name”]    | string     | 文件名                                                     |
| list[0] ["isdir”]        | int        | 是否是目录                                                 |
| list[0] ["server_ctime”] | int        | 文件的服务器创建时间                                       |
| list[0] ["server_mtime”] | int        | 文件的服务修改时间                                         |
| list[0] ["size”]         | int        | 文件大小                                                   |
| list[0] ["thumbs”]       |            | 缩略图地址                                                 |
| list[0] ["height”]       | int        | 图片高度                                                   |
| list[0] ["width”]        | int        | 图片宽度                                                   |
| list[0] ["date_taken”]   | int        | 图片拍摄时间                                               |

### 示例说明

假设示例请求数据如下

| 参数         | 参数数据                          | 描述               |
| ------------ | --------------------------------- | ------------------ |
| access_token | 123.456                           | 接口鉴权参数       |
| fsids        | [414244021542671,633507813519281] | 待查询的文件id数据 |
| path         | ------                            | 共享目录路径       |
| thumb        | 1                                 | 需要缩略图         |
| dlink        | 1                                 | 需要下载地址       |
| extra        | 1                                 | 需要图片的拍摄时间 |

#### curl示例

```
curl -L -X GET 'http://pan.baidu.com/rest/2.0/xpan/multimedia?access_token=123.456&method=filemetas&fsids=[414244021542671,633507813519281]&thumb=1&dlink=1&extra=1' \
-H 'User-Agent: pan.baidu.com' 
```

#### Python示例

```
import requests

url = "http://pan.baidu.com/rest/2.0/xpan/multimedia?access_token=123.456&method=filemetas&fsids=[414244021542671,633507813519281]&thumb=1&dlink=1&extra=1"
payload = {}
files = {}
headers = {
  'User-Agent': 'pan.baidu.com'
}
response = requests.request("GET", url, headers=headers, data = payload, files = files)
print(response.text.encode('utf8'))
```

#### 响应示例



```
{
    "errmsg": "succ",
    "errno": 0,
    "list": [
        {
            "category": 3,
            "date_taken": 1364134922,
            "dlink": "https://d.pcs.baidu.com/file/1261d72d03471f7b7b805fd60e024b8d?fid=2082810368-250528-414244021542671&rt=pr&sign=FDtAERV-DCb740ccc5511e5e8fedcff06b081203-Rnos3iOhNnMF1pS44AUWwor%2BJw8%3D&expires=8h&chkbd=0&chkv=2&dp-logid=4111511902857508725&dp-callid=0&dstime=1596179809&r=802381259",
            "filename": "AdventureCoveWaterparkMap.jpg",
            "fs_id": 414244021542671,
            "height": 1379,
            "isdir": 0,
            "md5": "1261d72d03471f7b7b805fd60e024b8d",
            "oper_id": 2082810368,
            "path": "/测试目录/AdventureCoveWaterparkMap.jpg",
            "server_ctime": 1475996301,
            "server_mtime": 1596077947,
            "size": 642374,
            "thumbs": {
                "icon": "https://thumbnail0.baidupcs.com/thumbnail/1261d72d03471f7b7b805fd60e024b8d?fid=2082810368-250528-414244021542671&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-WFrLp5fm4e8R5rkMgRiJcXvcgaE%3D&expires=8h&chkbd=0&chkv=0&dp-logid=4111511813362484537&dp-callid=0&time=1596178800&size=c60_u60&quality=100&vuk=2082810368&ft=image",
                "url1": "https://thumbnail0.baidupcs.com/thumbnail/1261d72d03471f7b7b805fd60e024b8d?fid=2082810368-250528-414244021542671&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-WFrLp5fm4e8R5rkMgRiJcXvcgaE%3D&expires=8h&chkbd=0&chkv=0&dp-logid=4111511813362484537&dp-callid=0&time=1596178800&size=c140_u90&quality=100&vuk=2082810368&ft=image",
                "url2": "https://thumbnail0.baidupcs.com/thumbnail/1261d72d03471f7b7b805fd60e024b8d?fid=2082810368-250528-414244021542671&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-WFrLp5fm4e8R5rkMgRiJcXvcgaE%3D&expires=8h&chkbd=0&chkv=0&dp-logid=4111511813362484537&dp-callid=0&time=1596178800&size=c360_u270&quality=100&vuk=2082810368&ft=image",
                "url3": "https://thumbnail0.baidupcs.com/thumbnail/1261d72d03471f7b7b805fd60e024b8d?fid=2082810368-250528-414244021542671&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-WFrLp5fm4e8R5rkMgRiJcXvcgaE%3D&expires=8h&chkbd=0&chkv=0&dp-logid=4111511813362484537&dp-callid=0&time=1596178800&size=c850_u580&quality=100&vuk=2082810368&ft=image"
            },
            "width": 1600
        },
        {
            "category": 2,
            "dlink": "https://d.pcs.baidu.com/file/b8b5bd53e23dd40b5c4a650e272f2e19?fid=2082810368-250528-633507813519281&rt=pr&sign=FDtAERV-DCb740ccc5511e5e8fedcff06b081203-jNywejzZHFr6izk7l%2BBn28IV8aM%3D&expires=8h&chkbd=0&chkv=2&dp-logid=4111512102813570203&dp-callid=0&dstime=1596179809&r=802381259",
            "filename": "Sleep Away.mp3",
            "fs_id": 633507813519281,
            "isdir": 0,
            "md5": "b8b5bd53e23dd40b5c4a650e272f2e19",
            "oper_id": 2082810368,
            "path": "/测试目录/Sleep Away.mp3",
            "server_ctime": 1563282091,
            "server_mtime": 1596077717,
            "size": 4842585,
            "thumbs": {}
        }
    ],
    "names": {},
    "request_id": "4111827552384370545"
}
```

#### 错误码说明

| 错误码 | 描述                                   |
| ------ | -------------------------------------- |
| 42211  | 图片详细信息查询失败                   |
| 42212  | 共享目录文件上传者信息查询失败，可重试 |
| 42213  | 共享目录鉴权失败                       |
| 42214  | 文件基础信息查询失败                   |

更多错误码请参考： [https://pan.baidu.com/union/document/error#%E9%94%99%E8%AF%AF%E7%A0%81%E5%88%97%E8%A1%A8](https://pan.baidu.com/union/document/error#错误码列表)

#### 请求限制

单用户单接口的QPS（每秒请求次数）上限如下。

| 分钟 | 小时 | 天   |
| ---- | ---- | ---- |
| 20   | 300  | 1000 |

## 管理文件

### 接口概述

#### 接口功能

> 本文档主要针对需要集成http api的技术工程师。 如果您的应用已经获取用户授权，则可以通过该接口对指定的文件进行复制，移动，重命名和删除操作。

#### 使用条件

> 频控限制：有
> 接口鉴权：有
> 接入流程：[https://pan.baidu.com/union/document/entrance#%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B](https://pan.baidu.com/union/document/entrance#接入流程)

#### 依赖说明

> access_token: 作为访问用户数据的授权凭证

#### 其他说明

```
1. ondup参数分为全局ondup参数和文件对应的ondup参数，后者具有更高优先级。
2. async=0/2则server端一定会按照同步/异步方式处理，async=1则server按照文件数目自适应选择同步/异步方式，以返回的taskid为准。
3. delete操作没有ondup选项, 当失败时，可以选择再次发送请求。
```

#### 问题反馈

> 参考 [https://pan.baidu.com/union/document/entrance#%E9%97%AE%E9%A2%98%E5%8F%8D%E9%A6%88](https://pan.baidu.com/union/document/entrance#问题反馈)

### 参数说明

#### 请求方式

> POST

#### 接口地址

```
https://pan.baidu.com/rest/2.0/xpan/file?method=filemanager
```

#### 请求参数

query参数

| 名称         | 类型   | 必须 | 示例 | 参数位置 | 描述                                 |
| ------------ | ------ | ---- | ---- | -------- | ------------------------------------ |
| access_token | string | 是   | ---- | query    | 接口的鉴权参数                       |
| opera        | string | 是   | ---- | query    | 文件操作:copy, mover, rename, delete |

body参数

| 名称     | 类型       | 必须 | 示例 | 参数位置 | 描述                                                         |
| -------- | ---------- | ---- | ---- | -------- | ------------------------------------------------------------ |
| async    | int        | 是   | ---  | body     | 0:同步， 1 自适应，2异步                                     |
| filelist | json array | 是   | ---  | body     | 文件列表, copy/move:[{"path":"/测试目录/123456.docx","dest":"/测试目录/abc","newname":"11223.docx","ondup":"fail"}] rename:[{path":"/测试目录/123456.docx","newname":test.docx"}] delete:["/测试目录/123456.docx"] |
| ondup    | string     | 否   | ---  | body     | 全局ondup,遇到重复文件的处理策略, fail(默认，直接返回失败)、newcopy(重命名文件)、overwrite、skip |

#### 响应参数

| 参数   | 类型   | 描述                      |
| ------ | ------ | ------------------------- |
| taskid | uint64 | 异步任务id, async=2时返回 |
| info   | array  | 文件信息                  |

### 示例说明

假设示例请求数据如下。

query参数

| 参数         | 参数数据    | 描述                 |
| ------------ | ----------- | -------------------- |
| access_token | 123.456     | 接口鉴权参数         |
| opera        | copy/delete | 文件操作：移动、删除 |

body参数

| 参数     | 参数数据                                                     | 描述     |
| -------- | ------------------------------------------------------------ | -------- |
| filelist | 移动:[{"path":"/测试目录/123456.docx","dest":"/测试目录/abc","newname":"11223.docx","ondup":"fail"}] 删除:["/测试目录/123456.docx"] | 文件列表 |
| async    | 1                                                            | 自适应   |

#### curl示例

```
curl -L  -X POST "http://pan.baidu.com/rest/2.0/xpan/file?method=filemanager&access_token=123.456&opera=copy" -d 'async=2&filelist=[{"path":"/测试目录/123456.docx","dest":"/测试目录/abc","newname":"11223.docx","ondup":"fail"}]' -H "User-Agent: pan.baidu.com"
```

#### Python示例

```
import requests

url = "https://pan.baidu.com/rest/2.0/xpan/file&access_token=123.456&opera=copy&method=filemanager"
payload = {'async': '2',
'filelist': '[{"path":"/测试目录/123456.docx","dest":"/测试目录/abc","newname":"11223.docx","ondup":"fail"}]',
'ondup': 'fail'}
files = [
]
headers = {
  'User-Agent': 'pan.baidu.com'
}
response = requests.request("POST", url, headers=headers, data = payload, files = files)
print(response.text.encode('utf8'))
```

#### 响应示例



```
异步copy：
{
 "errno":0,
 "info":[],
 "request_id":4933141731265056648,
 "taskid":305630575292492
 }
同步copy：
{
 "errno":0,
 "info":    
     [{"errno":0,"path":"\/\u6d4b\u8bd5\u76ee\u5f55\/20160821.txt"}],
 "request_id":4933354344481145962
 }
同步删除：
{
 "errno":0,
  "info":        
          [{"errno":0,"path":"\/\u6d4b\u8bd5\u76ee\u5f55\/123456.docx"}],
  "request_id":4934008404393179441
 }
```

#### 错误码说明

更多错误码请参考： [https://pan.baidu.com/union/document/error#%E9%94%99%E8%AF%AF%E7%A0%81%E5%88%97%E8%A1%A8](https://pan.baidu.com/union/document/error#错误码列表)

#### 请求限制

单用户单接口的QPS（每秒请求次数）上限如下。

| 分钟 | 小时 | 天   |
| ---- | ---- | ---- |
| 20   | 300  | 1000 |

## 能力说明

### 上传流程

文件上传分为三个阶段：预上传、分片上传、创建文件。只有完成这三步，才能将文件上传到网盘。

### 权限申请

使用上传接口之前，请申请接入，申请地址为：https://pan.baidu.com/union/apply/

### 上传文件夹限制

每个第三方在网盘只能拥有一个文件夹用于存储上传文件，该文件夹必须位于`/apps`目录下，apps下的文件夹名称为申请接入填写的`申请接入的产品名称`，假如你申请接入的产品名称为”云存储“，那么该文件夹为`/apps/云存储`，用户看到的文件夹为`/我的应用数据/云存储`。

### 上传文件限制

**大小限制**

普通用户单个上传文件大小上限为4G

会员用户单个上传文件大小上限为10G

超级会员用户单个上传文件大小上限为20G

**类型限制**

普通用户在网盘APP端无法上传视频、Live Photo

### 通用参数

| 参数         | 类型   | 必需 | 示例值                                                       | 描述     |
| ------------ | ------ | ---- | ------------------------------------------------------------ | -------- |
| access_token | string | 是   | 1.a6b7dbd428f731035f771b8d15063f61.86400.1292922000-2346678-124328 | 授权凭证 |

**备注：**

1. 通用参数所有接口都需要带
2. 通用参数必须放在URL里（即query请求参数）

## 预上传

### 接口描述

预上传是为了通知网盘有一个上传任务开始了，网盘返回uploadid来标识这个上传任务

### 请求地址

```
https://pan.baidu.com/rest/2.0/xpan/file?method=precreate
```

### 请求方式

```
POST
```

### 请求参数

**query参数**

| 参数名       | 类型   | 必需 | 示例值                                                       | 描述     |
| ------------ | ------ | ---- | ------------------------------------------------------------ | -------- |
| access_token | string | 是   | 1.a6b7dbd428f731035f771b8d15063f61.86400.1292922000-2346678-124328 | 授权凭证 |

**body参数**

| 参数名      | 类型   | 是否必选 | 示例值                                                       | 描述                                                         |
| ----------- | ------ | -------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| path        | string | 是       | /apps/appName/filename.jpg                                   | 上传后使用的文件绝对路径，需要urlencode                      |
| size        | string | 是       | 4096                                                         | 文件或目录的大小，单位B，目录的话大小为0                     |
| isdir       | string | 是       | 0                                                            | 是否目录，0 文件、1 目录                                     |
| autoinit    | int    | 是       | 1                                                            | 固定值1                                                      |
| rtype       | int    | 否       | 1                                                            | 文件命名策略，默认0 0 为不重命名，返回冲突 1 为只要path冲突即重命名 2 为path冲突且block_list不同才重命名 3 为覆盖 |
| uploadid    | string | 否       | P1-MTAuMjI4LjQzLjMxOjE1OTU4NTg==                             | 上传id                                                       |
| block_list  | string | 是       | ["98d02a0f54781a93e354b1fc85caf488", "ca5273571daefb8ea01a42bfa5d02220"] | 文件各分片MD5数组的json串                                    |
| content-md5 | string | 否       | b20f8ac80063505f264e5f6fc187e69a                             | 文件MD5                                                      |
| slice-md5   | string | 否       | 9aa0aa691s5c0257c5ab04dd7eddaa47                             | 文件校验段的MD5，校验段对应文件前256KB                       |
| local_ctime | string | 否       | 1595919297                                                   | 客户端创建时间， 默认为当前时间戳                            |
| local_mtime | string | 否       | 1595919297                                                   | 客户端修改时间，默认为当前时间戳                             |

备注：

1. rtype=0时，如果云端存在同名文件，此次调用会失败
2. 云端文件重命名策略：假设云端已有文件为test.txt，新的名称为test(1).txt1, 当发现已有目录 /dir 时, 新创建的目录命名为：/dir(1)
3. content-md5和slice-md5都不为空时，接口会判断云端是否已存在相同文件，如果存在，返回的return_type=2，代表直接上传成功，无需请求后面的分片上传和创建文件接口

### 响应参数

| 参数        | 类型   | 示例值                           | 描述                                             |
| ----------- | ------ | -------------------------------- | ------------------------------------------------ |
| errno       | int    | 0                                | 错误码                                           |
| path        | string | /apps/appName/filename.jpg       | 文件的绝对路径                                   |
| uploadid    | string | P1-MTAuMjI4LjQzLjMxOjE1OTU4NTg== | 上传id                                           |
| return_type | int    | 1                                | 返回类型，1 文件在云端不存在、2 文件在云端已存在 |
| block_list  | string | [0,1,2]                          | 需要上传的分片序号，索引从0开始                  |

### 请求示例

**curl请求示例**

```shell
curl "http://pan.baidu.com/rest/2.0/xpan/file?method=precreate&access_token=123" -d 'path=/apps/appName/filename.jpg&size=2626327&isdir=0&autoinit=1&rtype=3&block_list=["60bac7b6464d84fed842955e6126826a"]&content-md5=60bac7b6464d84fed842955e6126826a&slice-md5=3c5c864d432cc2381b687f8d873e1429' -H "User-Agent: pan.baidu.com"
```

**python请求示例**

```python:n
import requests

url = "http://pan.baidu.com/rest/2.0/xpan/file?method=precreate&access_token=121.09328b9s6d4dc84120efce9a518d2229fa.YDNekqyLWXmjQ-jb5ESdais6d9mUYXpfNwdGUf9gL.I6EPaQ"
payload = {'path': '/apps/test/test.jpg',
'size': '91037',
'rtype': '1',
'isdir': '0',
'autoinit': '1',
'block_list': '["e08b8e863d2fffce685530608305598c"]'}
files = [
]
headers = {
  'Cookie': 'BAIDUID=56BE0870011A115CFA43E19EA4CE92C2:FG=1; BIDUPSID=56BE0870011A115CFA43E19EA4CE92C2; PSTM=1535714267'
}
response = requests.request("POST", url, headers=headers, data = payload, files = files)
print(response.text.encode('utf8'))
```



### 响应示例

```json
# block_list为空时，等价于[0]
{
  "path": "/baidu/test/test.zip",
  "uploadid": "N1-MjIwLjE4MS4zOC4xMTY6MTU0NTgxOTIyNzoyNzMzODk2NTI3MzYyMjk2MTU=",
  "return_type": 1,
  "block_list": [],
  "errno": 0,
  "request_id": 273389652736229615
}
# 需要上传3个分片
{
    "path": "/baidu/test/test.zip",
    "uploadid": "N1-NjEuMTM1LjE2OS44NDoxNTQ1ODE4MTY1OjgzNDM1NTUyMzU5MjIxMTMzMDc=",
    "return_type": 1,
    "block_list": [0,1,2],
    "errno": 0,
    "request_id": 8343555235922113307
}
# 文件已存在于云端，上传完成
{
  "return_type": 2,
  "errno": 0,
  "info": {
    "size": 2626327,
    "category": 6,
    "isdir": 0,
    "request_id": 273435691682366413,
    "path": "/baidu/test/test.zip",
    "fs_id": 657059106724647,
    "md5": "60bac7b6464d84fed842955e6126826a",
    "ctime": 1545819399,
    "mtime": 1545819399
  },
  "request_id": 273435691682366413
}
```

### 错误码说明

| 错误码 | 描述                       |
| ------ | -------------------------- |
| -7     | 文件或目录名错误或无权访问 |

更多错误码：https://pan.baidu.com/union/document/error

## 分片上传

### 接口说明

用于将文件上传，大文件需要将文件进行切片，然后分片上传。

**限制**

1. 普通用户单个分片大小固定为4MB（文件大小如果小于4MB，无需切片，直接上传即可），单文件总大小上限为4G。
2. 普通会员用户单个分片大小上限为16MB，单文件总大小上限为10G。
3. 超级会员用户单个分片大小上限为32MB，单文件总大小上限为20G。

### 请求地址

```
https://d.pcs.baidu.com/rest/2.0/pcs/superfile2?method=upload
```

### 请求方式

```
POST
```

### 请求参数

**query参数**

| 参数         | 类型   | 必需 | 示例值                                                       | 描述                                                         |
| ------------ | ------ | ---- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| access_token | string | 是   | 1.a6b7dbd428f731035f771b8d15063f61.86400.1292922000-2346678-124328 | 授权凭证                                                     |
| method       | string | 是   | upload                                                       | 固定值 upload                                                |
| type         | string | 是   | tmpfile                                                      | 固定值 tmpfile                                               |
| path         | string | 是   | /apps/appName/filename.jpg                                   | 上传后使用的文件绝对路径，需要urlencode                      |
| uploadid     | string | 是   | N1-MjIwLjE4MS4zfgsdgewrSEEd=                                 | precreate接口下发的uploadid                                  |
| partseq      | int    | 是   | 0                                                            | 文件分片的位置序号，从0开始，参考precreate接口返回的block_list |

**body参数**

| 参数 | 类型   | 必需 | 示例值 | 描述           |
| ---- | ------ | ---- | ------ | -------------- |
| file | char[] | 是   |        | 上传的文件内容 |

### 响应参数

| 参数  | 类型   | 示例值                           | 描述            |
| ----- | ------ | -------------------------------- | --------------- |
| errno | int    | 0                                | 错误码          |
| md5   | string | 60bac7b6464d84fed842955e6126826a | 文件切片云端md5 |

### 请求示例

**curl请求示例**

```shell
curl -F 'file=@/Downloads/filename.jpg' "https://d.pcs.baidu.com/rest/2.0/pcs/superfile2?access_token=1.a6b7dbd428f731037f771b9d15063f61.86410.1292922000-2346618-124528&method=upload&type=tmpfile&path=/apps/AppName/filename.jpg&uploadid=N1-NjEuMTM1LjE2OS44NDoxNTQ1OTY1NTQyOjgzODMxMTY0MDkyNDY2NjQ5Nzg&partseq=0"
```

**python请求示例**

```python:n
import requests

url = "https://d.pcs.baidu.com/rest/2.0/pcs/superfile2?method=upload&access_token=1.a6b7dbd428f731037f771b9d15063f61.86410.1292922000-2346618-124528&path=/apps/test/test.jpg&type=tmpfile&uploadid=N1-NjEuMTM1LjE2OS44NDoxNTk2MTExNTczOjQ5MTMzMjgwNjk3MDYxODg3MzQ=&partseq=0"
payload = {}
files = [
  ('file', open('/storage/test.jpg','rb'))
]
headers = {
  'Cookie': 'BAIDUID=56BE0870011A115CFA43E19EA4CE92C2:FG=1; BIDUPSID=56BE0870011A115CFA43E19EA4CE92C2; PSTM=1535714267'
}
response = requests.request("POST", url, headers=headers, data = payload, files = files)
print(response.text.encode('utf8'))
```



### 响应示例

```json
{
  "md5": "55142edf74727f4a80cfd86c4d80be4f",
  "request_id": 8383464737849269312
}
```

### 错误码说明

| 错误码 | 描述                    |
| ------ | ----------------------- |
| 31024  | 没有申请上传权限        |
| 31299  | 第一个分片的大小小于4MB |
| 31364  | 超出分片大小限制        |

更多错误码：https://pan.baidu.com/union/document/error

## 创建文件

### 接口说明

用于将多个分片合并成一个文件，完成文件的上传。
备注：可以使用该接口创建文件夹。

### 接口地址

```
https://pan.baidu.com/rest/2.0/xpan/file?method=create
```

### 请求方式

```
POST
```

### 请求参数

**query参数**

| 参数名       | 类型   | 必需 | 示例值                                                       | 描述     |
| ------------ | ------ | ---- | ------------------------------------------------------------ | -------- |
| access_token | string | 是   | 1.a6b7dbd428f731035f771b8d15063f61.86400.1292922000-2346678-124328 | 授权凭证 |

**body参数**

| 参数名      | 类型       | 必需 | 示例值                                                       | 描述                                                         |
| ----------- | ---------- | ---- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| path        | string     | 是   | /apps/appName/filename.jpg                                   | 上传后使用的文件绝对路径                                     |
| size        | string     | 是   | 4096                                                         | 文件或目录的大小，必须要和文件真实大小保持一致               |
| isdir       | string     | 是   | 0                                                            | 是否目录，0 文件、1 目录                                     |
| rtype       | int        | 否   | 1                                                            | 文件命名策略，默认1 0 为不重命名，返回冲突 1 为只要path冲突即重命名 2 为path冲突且block_list不同才重命名 3 为覆盖 |
| uploadid    | string     | 否   | N1-MjIwLjE4MS4zfgsdgewrSEEd=                                 | uploadid， 非空表示通过superfile2上传                        |
| block_list  | json array | 否   | ["7d57c40c9fdb4e4a32d533bee1a4e409"]                         | 文件各分片MD5的json串 MD5对应superfile2返回的md5，且要按照序号顺序排列 |
| local_ctime | int        | 否   | 1596009229                                                   | 客户端创建时间(精确到秒)，默认为当前时间戳                   |
| local_mtime | int        | 否   | 1596009229                                                   | 客户端修改时间(精确到秒)，默认为当前时间戳                   |
| zip_quality | int        | 否   | 70                                                           | 图片压缩程度，有效值50、70、100                              |
| zip_sign    | int        | 否   | 7d57c40c9fdb4e4a32d533bee1a4e409                             | 未压缩原始图片文件真实md5                                    |
| is_revision | int        | 否   | 0                                                            | 是否需要多版本支持 1为支持，0为不支持， 默认为0 (带此参数会忽略重命名策略) |
| mode        | int        | 否   | 1                                                            | 上传方式 1 手动、2 批量上传、3 文件自动备份 4 相册自动备份、5 视频自动备份 |
| exif_info   | string     | 否   | {"height":3024,"date_time_original":"2018:09:06 15:58:58","model":"iPhone 6s","width":4032,"date_time_digitized":"2018:09:06 15:58:58","date_time":"2018:09:06 15:58:58","orientation":6,"recovery":0} | json字符串，orientation、width、height、recovery为必传字段，其他字段如果没有可以不传 |

### 响应参数

| 参数            | 类型   | 示例值                           | 描述                                                       |
| --------------- | ------ | -------------------------------- | ---------------------------------------------------------- |
| errno           | int    | 0                                | 错误码                                                     |
| fs_id           | uint64 | 693789892866840                  | 文件在云端的唯一标识ID                                     |
| md5             | string | 7d57c40c9fdb4e4a32d533bee1a4e409 | 文件的MD5，只有提交文件时才返回，提交目录时没有该值        |
| server_filename | string | test.txt                         | 文件名                                                     |
| category        | int    | 4                                | 分类类型, 1 视频 2 音频 3 图片 4 文档 5 应用 6 其他 7 种子 |
| path            | string | /apps/appName/test.txt           | 上传后使用的文件绝对路径                                   |
| size            | uint64 | 33818                            | 文件大小，单位B                                            |
| ctime           | uint64 | 1545969541                       | 文件创建时间                                               |
| mtime           | uint64 | 1545969541                       | 文件修改时间                                               |
| isdir           | int    | 0                                | 是否目录，0 文件、1 目录                                   |

### 请求示例

**curl请求示例**

```shell
curl "https://pan.baidu.com/rest/2.0/xpan/file?method=create&access_token=123" -d 'path=/apps/appName/test.txt&size=33818&isdir=0&rtype=3&uploadid=N1-NjEuMTM1LjE2OS44NDoxNTQ1OTY5MjAzOjgzODQwOTkyMzc2Nzc3MTQwNjc=&block_list=["7d57c40c9fdb4e4a32d533bee1a4e409"]' -H "User-Agent: pan.baidu.com"
```

**python请求示例**

```python:n
import requests

url = "https://pan.baidu.com/rest/2.0/xpan/file?method=create&access_token=121.09328b96d4c8412tty0efce9a518d2229fa.YDNekqyLWXmjQ-jb5ESdais69mUYXpfNwdGUd9gL.I6EPaQ"
payload = {'path': '/apps/test/test.jpg',
'size': '91037',
'rtype': '1',
'isdir': '0',
'uploadid': 'N1-NjEuMTM1LjE2OS44NDoxNTk2MTExNTczOjQ5MTMzMjgwNjk3MDYxODg3MzQ=',
'block_list': '["e08b8e863d2fffce685530608305598c"]'}
files = [
]
headers = {
  'Cookie': 'BAIDUID=56BE0870011A115CFA43E19EA4CE92C2:FG=1; BIDUPSID=56BE0870011A115CFA43E19EA4CE92C2; PSTM=1535714267'
}
response = requests.request("POST", url, headers=headers, data = payload, files = files)
print(response.text.encode('utf8'))
```



### 响应示例

```json
{
    "errno": 0,
    "fs_id": 693789892866840,
    "md5": "7d57c40c9fdb4e4a32d533bee1a4e409",
    "server_filename": "test.txt",
    "category": 4,
    "path": "/apps/appName/test.txt",
    "size": 33818,
    "ctime": 1545969541,
    "mtime": 1545969541,
    "isdir": 0,
    "name": "/apps/appName/test.txt"
}
```

### 错误码说明

| 错误码 | 描述                       |
| ------ | -------------------------- |
| -7     | 文件或目录名错误或无权访问 |
| -8     | 文件或目录已存在           |
| -10    | 云端容量已满               |
| 10     | 创建文件的superfile失败    |

更多错误码：https://pan.baidu.com/union/document/error

## 下载

### 接口概述

#### 接口功能

> 本文档主要针对需要集成http api的技术工程师。 如果您的应用已经获取用户授权，则可以通过该接口下载用户的文件。

#### 使用条件

> 频控限制：有
> 接口鉴权：有
> 接入流程：[https://pan.baidu.com/union/document/entrance#%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B](https://pan.baidu.com/union/document/entrance#接入流程)

#### 依赖说明

> access_token: 作为访问用户数据的授权凭证

#### 其他说明

```
1. 通过【列表类接口】获取文件的fsid。
2. 通过【取文件信息filemetas接口】获取文件的下载地址，即接口返回的dlink字段
3. 使用dlink下载文件
4. dlink有效期为8小时
5. 必需要设置User-Agent字段
6. dlink存在302跳转
```

#### 问题反馈

> 参考 [https://pan.baidu.com/union/document/entrance#%E9%97%AE%E9%A2%98%E5%8F%8D%E9%A6%88](https://pan.baidu.com/union/document/entrance#问题反馈)

### 参数说明

#### 请求方式

> GET

#### 接口地址

```
dlink示例如下，获取详情请参考【其他说明】：
https://d.pcs.baidu.com/file/1261d72d03471f7b7b805fd60e024b8d?fid=2082810368-250528-414244021542671&rt=pr&sign=FDtAERV-DCb740ccc5511e5e8fedcff06b081203-Rnos3iOhNnMF1pS44AUWwor%2BJw8%3D&expires=8h&chkbd=0&chkv=2&dp-logid=4111511902857508725&dp-callid=0&dstime=1596179809&r=802381259
```

#### 请求参数

query参数

| 名称         | 类型   | 必须 | 示例  | 参数位置 | 描述         |
| ------------ | ------ | ---- | ----- | -------- | ------------ |
| access_token | string | 是   | ----- | query    | 接口鉴权参数 |

header参数

| 名称       | 类型   | 必须 | 示例  | 参数位置 | 描述                  |
| ---------- | ------ | ---- | ----- | -------- | --------------------- |
| User-Agent | string | 是   | ----- | header   | 固定传：pan.baidu.com |

### 示例说明

假设示例请求数据如下

| 参数         | 参数数据      | 描述           |
| ------------ | ------------- | -------------- |
| access_token | 123.456       | 接口鉴权参数   |
| User-Agent   | pan.baidu.com | header必传字段 |

#### curl示例

```
curl -L -X GET 'https://d.pcs.baidu.com/file/1261d72d03471f7b7b805fd60e024b8d?fid=2082810368-250528-414244021542671&rt=pr&sign=FDtAERV-DCb740ccc5511e5e8fedcff06b081203-Rnos3iOhNnMF1pS44AUWwor%2BJw8%3D&expires=8h&chkbd=0&chkv=2&dp-logid=4111511902857508725&dp-callid=0&dstime=1596179809&r=802381259&access_token=123.456' \
-H 'User-Agent: pan.baidu.com' 
```

#### Python示例

```
import requests

url = "https://d.pcs.baidu.com/file/1261d72d03471f7b7b805fd60e024b8d?fid=2082810368-250528-414244021542671&rt=pr&sign=FDtAERV-DCb740ccc5511e5e8fedcff06b08120 Rnos3iOhNnMF1pS44AUWwor%2BJw8%3D&expires=8h&chkbd=0&chkv=2&dp-logid=4111511902857508725&dp-callid=0&dstime=1596179809&r=802381259&access_token=123.456"
payload = {}
files = {}
headers = {
  'User-Agent': 'pan.baidu.com'
}
response = requests.request("GET", url, headers=headers, data = payload, files = files)
print(response.text.encode('utf8'))
```

#### 错误码说明



更多错误码请参考： [https://pan.baidu.com/union/document/error#%E9%94%99%E8%AF%AF%E7%A0%81%E5%88%97%E8%A1%A8](https://pan.baidu.com/union/document/error#错误码列表)

#### 请求限制

单用户单接口的QPS（每秒请求次数）上限如下。

| 分钟 | 小时 | 天   |
| ---- | ---- | ---- |
| 20   | 300  | 1000 |

## 设备注册

### 接口说明

用于设备注册，当第三方应用安装时调用。

### 接口地址

```
https://pan.baidu.com/rest/2.0/xpan/device?method=register
```

### 请求方式

```
GET
```

### 请求参数

| 参数        | 类型   | 必需 | 示例值                           | 描述                                                         |
| ----------- | ------ | ---- | -------------------------------- | ------------------------------------------------------------ |
| device_type | string | 是   | 2020073115900228875              | 设备类型，具体值需要线下提供，联系邮箱：[netdisk-union@baidu.com](mailto:netdisk-union@baidu.com) |
| device_addr | string | 是   | 3c0cbaa96p20436982261cebe1fefd8f | 设备地址(设备的唯一标识)，可以是MAC地址或者产品序列号, 建议第三方对设备地址进行加密，即device_addr=MD5(MAC地址/产品序列号) |

### 响应参数

| 参数      | 类型   | 示例值             | 描述   |
| --------- | ------ | ------------------ | ------ |
| device_id | string | 91119331626125597v | 设备ID |

### 请求示例

**curl请求示例**

```shell
curl "https://pan.baidu.com/rest/2.0/xpan/device?method=register&device_type=2020073115900228875&device_addr=3c0cbaa96p20436982261cebe1fefd8f" -H "User-Agent: pan.baidu.com"
```

**python请求示例**

```python:n
import requests

url = "https://pan.baidu.com/rest/2.0/xpan/device?method=register&device_type=2020073115900228875&device_addr=3c0cbaa96p20436982261cebe1fefd8f"
payload = {}
headers = {
  'Cookie': 'BAIDUID=56BE0870011A115CFA43E19EA4CE92C2:FG=1; BIDUPSID=56BE0870011A115CFA43E19EA4CE92C2; PSTM=1535714267'
}
response = requests.request("GET", url, headers=headers, data = payload)
print(response.text.encode('utf8'))
```



### 响应示例

```json
{
    "device_id": "104771607rs1607808",
     "errno": 0,
    "errmsg": "",
    "request_id": "4101763753974075996"
}
```

### 错误码说明

| 错误码 | 描述           |
| ------ | -------------- |
| 42100  | 设备类型不存在 |

更多错误码：https://pan.baidu.com/union/document/error

## 设备绑定

### 接口说明

将设备和百度账号进行绑定

### 接口地址

```
https://pan.baidu.com/rest/2.0/xpan/device?method=bind
```

### 请求方式

```
GET
```

### 请求参数

| 参数         | 类型   | 必需 | 示例值                                           | 描述                     |
| ------------ | ------ | ---- | ------------------------------------------------ | ------------------------ |
| access_token | string | 是   | 1.a6b7dbd428f731035f771b8d15063f61.86400.8124328 | 百度授权凭证             |
| device_id    | string | 是   | 104771607rs1607808                               | 设备ID，设备注册接口下发 |

### 响应参数

| 参数      | 类型   | 描述                                    |
| --------- | ------ | --------------------------------------- |
| last_user | string | 上一个绑定用户的账号，errno=42103时有效 |

### 请求示例

**curl请求示例**

```shell
curl "https://pan.baidu.com/rest/2.0/xpan/device?method=bind&access_token=1.a6b7dbd428f731035f771b8d15063f61.86400.8124328&device_id=104771607rs1607808" -H "User-Agent: pan.baidu.com"
```

**python请求示例**

```python:n
import requests

url = "https://pan.baidu.com/rest/2.0/xpan/device?method=bind&access_token=1.a6b7dbd428f731035f771b8d15063f61.86400.8124328&device_id=104771607rs1607808"
payload = {}
headers = {
  'Cookie': 'BAIDUID=56BE0870011A115CFA43E19EA4CE92C2:FG=1; BIDUPSID=56BE0870011A115CFA43E19EA4CE92C2; PSTM=1535714267'
}
response = requests.request("GET", url, headers=headers, data = payload)
print(response.text.encode('utf8'))
```



### 响应示例

```json
# 正确示例
{
    "errmsg": "",
    "errno": 0,
    "request_id": "1480287893669784379"
}
# 错误示例
{
    "errmsg": "exceed max bind count per device",
    "errno": 42103,
    "last_user": "北极***g狼",
    "request_id": "1352489237847401603"
}
```

### 错误码说明

| 错误码 | 描述                                 |
| ------ | ------------------------------------ |
| 42101  | 设备未注册                           |
| 42102  | 超过每个用户能绑定的最大设备个数限制 |
| 42103  | 超过每个设备能绑定的最大用户个数限制 |

更多错误码：https://pan.baidu.com/union/document/error

## 设备解绑

### 接口说明

将设备和百度账号解绑

### 接口地址

```
https://pan.baidu.com/rest/2.0/xpan/device?method=unbind
```

### 请求方式

```
GET
```

### 请求参数

| 参数         | 类型   | 必需 | 示例值                                           | 描述                     |
| ------------ | ------ | ---- | ------------------------------------------------ | ------------------------ |
| access_token | string | 是   | 1.a6b7dbd428f731035f771b8d15063f61.86400.8124328 | 授权凭证                 |
| device_id    | string | 是   | 104771607rs1607808                               | 设备ID，设备注册接口下发 |

### 请求示例

**curl请求示例**

```shell
curl "https://pan.baidu.com/rest/2.0/xpan/device?method=unbind&access_token=1.a6b7dbd428f731035f771b8d15063f61.86400.8124328&device_id=104771607rs1607808" -H "User-Agent: pan.baidu.com"
```

**python请求示例**

```python:n
import requests

url = "https://pan.baidu.com/rest/2.0/xpan/device?method=unbind&access_token=1.a6b7dbd428f731035f771b8d15063f61.86400.8124328&device_id=104771607rs1607808"
payload = {}
headers = {
  'Cookie': 'BAIDUID=56BE0870011A115CFA43E19EA4CE92C2:FG=1; BIDUPSID=56BE0870011A115CFA43E19EA4CE92C2; PSTM=1535714267'
}
response = requests.request("GET", url, headers=headers, data = payload)
print(response.text.encode('utf8'))
```



### 错误码说明

| 错误码 | 描述       |
| ------ | ---------- |
| 42101  | 设备未注册 |

更多错误码：https://pan.baidu.com/union/document/error

## 检查设备绑定关系

### 接口说明

检查设备和百度账号是否已绑定

### 请求地址

```
https://pan.baidu.com/rest/2.0/xpan/device?method=checkbind
```

### 请求方式

```
GET
```

### 请求参数

| 参数         | 类型   | 必需 | 示例值                                           | 描述                     |
| ------------ | ------ | ---- | ------------------------------------------------ | ------------------------ |
| access_token | string | 是   | 1.a6b7dbd428f731035f771b8d15063f61.86400.8124328 | 授权凭证                 |
| device_id    | string | 是   | 104771607rs1607808                               | 设备ID，设备注册接口下发 |

### 响应参数

| 参数   | 类型 | 描述                 |
| ------ | ---- | -------------------- |
| status | int  | 是否绑定，1 是、0 否 |

### 请求示例

**curl请求示例**

```shell
curl "https://pan.baidu.com/rest/2.0/xpan/device?method=checkbind&access_token=1.a6b7dbd428f731035f771b8d15063f61.86400.8124328&device_id=104771607rs1607808" -H "User-Agent: pan.baidu.com"
```

**python请求示例**

```python:n
import requests

url = "https://pan.baidu.com/rest/2.0/xpan/device?method=checkbind&access_token=1.a6b7dbd428f731035f771b8d15063f61.86400.8124328&device_id=104771607rs1607808"
payload = {}
headers = {
  'Cookie': 'BAIDUID=56BE0870011A115CFA43E19EA4CE92C2:FG=1; BIDUPSID=56BE0870011A115CFA43E19EA4CE92C2; PSTM=1535714267'
}
response = requests.request("GET", url, headers=headers, data = payload)
print(response.text.encode('utf8'))
```



### 响应示例

```json
{
  "errmsg": "",
  "errno": 0,
  "request_id": "1253926140339337558",
  "status": 1
}
```

### 错误码说明

| 错误码 | 描述       |
| ------ | ---------- |
| 42101  | 设备未注册 |

## 设备列表diff

### 接口说明

获取某个用户的设备列表的变化情况。
注意：该接口不是用于直接获取设备列表的，需要获取设备列表请使用获取列表接口

### 接口地址

```
https://pan.baidu.com/rest/2.0/xpan/device?method=diff
```

### 请求方式

```
POST
```

### 请求参数

**query参数**

| 参数         | 类型   | 必需 | 示例                                             | 描述     |
| ------------ | ------ | ---- | ------------------------------------------------ | -------- |
| access_token | string | 是   | 1.a6b7dbd428f731035f771b8d15063f61.86400.8124328 | 授权凭证 |

**body参数**

| 参数  | 类型   | 必需 | 示例值                                     | 描述                                                         |
| ----- | ------ | ---- | ------------------------------------------ | ------------------------------------------------------------ |
| param | string | 是   | {"cursor": "", "category_list": [1, 2, 3]} | 参数，json str，json里有cursor和category_list两个参数，cursor为diff起点，首次为null字符串或空字符串；category_list为设备分类列表，json str, 1 音箱，2 电视，3 nas 。 |

### 响应参数

| 参数                              | 类型       | 示例值                                                       | 描述                           |
| --------------------------------- | ---------- | ------------------------------------------------------------ | ------------------------------ |
| cursor                            | string     | MTU0Mjg2MzgxMiMxNTQ0NjcyMDQ5                                 | 下一次diff的起点               |
| has_more                          | int        | 1                                                            | 是否还有更多数据，0 没有，1 有 |
| device_list                       | json array |                                                              | 设备列表                       |
| device_list[0]["device_id"]       | string     | 104771607rs1607808                                           | 设备ID                         |
| device_list[0]["device_type"]     | int        | 2020073115900228875                                          | 设备类型                       |
| device_list[0]["status"]          | int        | 1                                                            | 设备状态，0 未绑定，1 绑定     |
| device_list[0]["device_category"] | int        | 1                                                            | 设备分类                       |
| device_list[0]["ability"]         | string     |                                                              | 设备能力，英文逗号分隔         |
| device_list[0]["device_provider"] | string     | 华为                                                         | 设备厂商                       |
| device_list[0]["device_brand"]    | string     | 华为路由器                                                   | 设备品牌名称                   |
| device_list[0]["device_name"]     | string     | MY HUWEI WIFI                                                | 设备自定义名称                 |
| device_list[0]["device_logourl"]  | string     | https://issuecdn.baidupcs.com/issue/netdisk/tu/rongyao/rongyao.png | 设备icon url                   |
| device_list[0]["guide_desc"]      | string     |                                                              | 设备引导页文案                 |
| device_list[0]["guide_imgurl "]   | string     |                                                              | 设备引导页                     |
| device_list[0]["extra_info "]     | string     |                                                              | 设备其他信息，对应json string  |

### 请求示例

**curl请求示例**

```shell
curl "https://pan.baidu.com/rest/2.0/xpan/device?method=diff&access_token=1.a6b7dbd428f731035f771b8d15063f61.86400.8124328" -d 'param={"cursor": "", "category_list": [1, 2, 3]}' -H "User-Agent: pan.baidu.com"
```

**python请求示例**

```python:n
import requests

url = "https://pan.baidu.com/rest/2.0/xpan/device?method=diff&access_token=1.a6b7dbd428f731035f771b8d15063f61.86400.8124328"
payload = {'param': '{"cursor": "", "category_list": [1, 2, 3]}'}
files = [
]
headers = {
  'Cookie': 'BAIDUID=56BE0870011A115CFA43E19EA4CE92C2:FG=1; BIDUPSID=56BE0870011A115CFA43E19EA4CE92C2; PSTM=1535714267'
}
response = requests.request("POST", url, headers=headers, data = payload, files = files)
print(response.text.encode('utf8'))
```



### 响应示例

```json
{
  "cursor": "MTU0Mjg2MzgxMiMxNTQ0NjcyMDQ5",
  "device_list": [
    {
      "ability": "4",
      "ctime": 1541405212,
      "device_brand": "华为路由器",
      "device_category": 3,
      "device_id": "104771607rs1607808",
      "device_logourl": "https://issuecdn.baidupcs.com/issue/netdisk/tu/rongyao/rongyao.png",
      "device_name": "weijiazhen",
      "device_provider": "华为",
      "device_type": 2,
      "extra_info": "",
      "guide_desc": "华为路由器",
      "guide_imgurl": "",
      "mtime": 1543990788,
      "status": 0
    },
    {
      "ability": "4",
      "ctime": 1542863812,
      "device_brand": "华为路由器",
      "device_category": 3,
      "device_id": "104771607rs1607809",
      "device_logourl": "https://issuecdn.baidupcs.com/issue/netdisk/tu/rongyao/rongyao.png",
      "device_name": "MY HUWEI WIFI",
      "device_provider": "华为",
      "device_type": 2,
      "extra_info": "",
      "guide_desc": "华为路由器",
      "guide_imgurl": "",
      "mtime": 1543990788,
      "status": 1
    },
    {
      "ability": "1,2,3",
      "ctime": 1541596125,
      "device_brand": "创维盒子",
      "device_category": 2,
      "device_id": "104771607rs1607810",
      "device_logourl": "https://issuecdn.baidupcs.com/issue/netdisk/tu/hezi.PNG",
      "device_name": "创维小湃盒子",
      "device_provider": "创维",
      "device_type": 1,
      "extra_info": "",
      "guide_desc": "更大屏幕，放大精彩",
      "guide_imgurl": "",
      "mtime": 1542441752,
      "status": 1
    },
  ],
  "errmsg": "",
  "errno": 0,
  "has_more": 0,
  "request_id": "74449114155359224"
}
```

## 设备列表

### 接口说明

获取用户的设备列表

### 请求地址

```
https://pan.baidu.com/rest/2.0/xpan/device?method=list
```

### 请求方式

```
GET
```

### 请求参数

| 参数         | 类型   | 必需 | 示例值                                           | 描述                                                         |
| ------------ | ------ | ---- | ------------------------------------------------ | ------------------------------------------------------------ |
| access_token | string | 是   | 1.a6b7dbd428f731035f771b8d15063f61.86400.8124328 | 授权凭证                                                     |
| category     | string | 是   | 1,2,3                                            | 设备分类列表，1 音箱、2 电视、3 NAS 多个分类用英文逗号分隔，如1,2,3 |

### 响应参数

| 参数            | 类型   | 示例值                                                       | 描述                          |
| --------------- | ------ | ------------------------------------------------------------ | ----------------------------- |
| device_id       | string | 104771607rs1607808                                           | 设备ID                        |
| device_type     | int    | 2020465723645                                                | 设备类型                      |
| status          | int    | 1                                                            | 设备状态，0 未绑定，1 绑定    |
| device_category | int    | 1                                                            | 设备分类                      |
| ability         | string | 4                                                            | 设备能力，英文逗号分隔        |
| device_provider | string | 华为                                                         | 设备厂商                      |
| device_brand    | string | 华为路由器                                                   | 设备品牌名称                  |
| device_name     | string | MY HUAWEI WIFI                                               | 设备自定义名称                |
| device_logourl  | string | https://issuecdn.baidupcs.com/issue/netdisk/tu/rongyao/rongyao.png | 设备icon url                  |
| guide_desc      | string |                                                              | 设备引导页文案                |
| guide_imgurl    | string |                                                              | 设备引导页                    |
| extra_info      | string |                                                              | 设备其他信息，对应json string |

### 请求示例

**curl请求示例**

```shell
curl "https://pan.baidu.com/rest/2.0/xpan/device?method=list&access_token=1.a6b7dbd428f731035f771b8d15063f61.86400.8124328&category=3" -H "User-Agent: pan.baidu.com"
```

**python请求示例**

```python:n
import requests

url = "https://pan.baidu.com/rest/2.0/xpan/device?method=list&access_token=1.a6b7dbd428f731035f771b8d15063f61.86400.8124328&category=3"
payload = {}
headers = {
  'Cookie': 'BAIDUID=56BE0870011A115CFA43E19EA4CE92C2:FG=1; BIDUPSID=56BE0870011A115CFA43E19EA4CE92C2; PSTM=1535714267'
}
response = requests.request("GET", url, headers=headers, data = payload)
print(response.text.encode('utf8'))
```



### 响应示例

```json
{
  "list": [
    {
      "ability": "4",
      "ctime": 1541405212,
      "device_brand": "华为路由器",
      "device_category": 3,
      "device_id": "123",
      "device_logourl": "https://issuecdn.baidupcs.com/issue/netdisk/tu/rongyao/rongyao.png",
      "device_name": "weijiazhen",
      "device_provider": "华为",
      "device_type": 2,
      "extra_info": "",
      "guide_desc": "华为路由器",
      "guide_imgurl": "",
      "mtime": 1543990788,
      "status": 0
    },
  ],
  "errmsg": "",
  "errno": 0,
  "request_id": "74449114155359224"
}
```